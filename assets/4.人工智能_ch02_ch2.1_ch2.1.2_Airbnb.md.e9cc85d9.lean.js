import{_ as l,o as t,c as a,j as T,a as m,U as Q}from"./chunks/framework.489e5108.js";const e2=JSON.parse('{"title":"前言","description":"","frontmatter":{},"headers":[],"relativePath":"4.人工智能/ch02/ch2.1/ch2.1.2/Airbnb.md","filePath":"4.人工智能/ch02/ch2.1/ch2.1.2/Airbnb.md","lastUpdated":1696176798000}'),e={name:"4.人工智能/ch02/ch2.1/ch2.1.2/Airbnb.md"},s=Q("",18),d={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.112ex"},xmlns:"http://www.w3.org/2000/svg",width:"39.476ex",height:"7.07ex",role:"img",focusable:"false",viewBox:"0 -1749.5 17448.4 3124.8","aria-hidden":"true"},o=Q("",1),r=[o],H=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),T("mo",null,"="),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"s"),T("mo",null,"∈"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"S")])])]),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])]),T("mo",null,"∈"),T("mi",null,"s")])]),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("mi",null,"m"),T("mo",null,"≥"),T("mi",null,"j"),T("mo",null,"≤"),T("mi",null,"m"),T("mo",null,","),T("mi",null,"i"),T("mo",null,"≠"),T("mn",null,"0")])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"double-struck"},"P")]),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i"),T("mo",null,"+"),T("mi",null,"j")])]),T("mo",null,"∣"),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),i=T("p",null,"概率 $ \\mathbb {P}\\left (l_{i+j} \\mid l_{i}\\right) $ 是基于 soft-max 函数的表达式。表示在一个 session 中，已知中心 listing $ l_i $ 来预测上下文 listing $ l_{i+j} $ 的概率：",-1),h={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.98ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.004ex",height:"9.09ex",role:"img",focusable:"false",viewBox:"0 -2259 13703.7 4018","aria-hidden":"true"},c=Q("",1),p=[c],V=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"double-struck"},"P")]),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i"),T("mo",null,"+"),T("mi",null,"j")])]),T("mo",null,"∣"),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"="),T("mfrac",null,[T("mrow",null,[T("mi",null,"exp"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])])]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"⊤")])]),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i"),T("mo",null,"+"),T("mi",null,"j")])])]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")])]),T("mrow",null,[T("munderover",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l"),T("mo",null,"="),T("mn",null,"1")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"V")]),T("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),T("mi",null,"exp"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])])]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"⊤")])]),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")])])])])],-1),L=T("ul",null,[T("li",null,[m("其中， $ \\mathbf {v}"),T("em",null,"{l"),m(" {i}} $ 表示 listing $ l_i $ 的 Embedding 向量， $ |\\mathcal {V}| $ 表示全部的物料库的数量。")])],-1),x=T("p",null,"考虑到物料库 $ \\mathcal {V} $ 过大，模型中参数更新的时间成本和 $ |\\mathcal {V}| $ 成正比。为了降低计算复杂度，要进行负采样。负采样后，优化的目标函数如下：",-1),u={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},w={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.281ex"},xmlns:"http://www.w3.org/2000/svg",width:"49.435ex",height:"6.318ex",role:"img",focusable:"false",viewBox:"0 -1342 21850.1 2792.4","aria-hidden":"true"},M=Q("",1),f=[M],y=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")]),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("mi",null,"c"),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"p")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msup",null,[T("mi",{"data-mjx-alternate":"1"},"′"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])])])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("mi",null,"c"),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])])])],-1),Z=T("p",null,[m("至此，对 Skip-Gram 模型和 NEG 了解的同学肯定很熟悉，上述方法和 Word2Vec 思想基本一致。 下面，将进一步介绍 Airbnb 是如何改进 Listing Embedding 的学习以及其他方面的应用。 "),T("strong",null,"（1）正负样本集构建的改进")],-1),k=T("ul",null,[T("li",null,[m("使用 booked listing 作为全局上下文 "),T("ul",null,[T("li",null,"booked listing 表示用户在 session 中最终预定的房源，一般只会出现在结束的 session 中。"),T("li",null,[m("Airbnb 将最终预定的房源，始终作为滑窗的上下文，即全局上下文。如下图： "),T("ul",null,[T("li",null,"如图，对于当前滑动窗口的 central listing，实线箭头表示 context listings，虚线（指向 booked listing）表示 global context listing。")])])])])],-1),D=T("img",{src:"https://ryluo.oss-cn-chengdu.aliyuncs.com/图片1653053823336-0564b2da-c993-46aa-9b22-f5cbb784dae2.png",alt:"img",style:{zoom:"50%"}},null,-1),b=T("ul",null,[T("li",null,"booked listing 作为全局正样本，故优化的目标函数更新为：")],-1),j={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.281ex"},xmlns:"http://www.w3.org/2000/svg",width:"66.462ex",height:"6.318ex",role:"img",focusable:"false",viewBox:"0 -1342 29376.1 2792.4","aria-hidden":"true"},R=Q("",1),_=[R],A=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")]),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("mi",null,"c"),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"p")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msup",null,[T("mi",{"data-mjx-alternate":"1"},"′"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])])])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("mi",null,"c"),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])]),T("mo",null,"+"),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mi",null,"b")])])])])])])])])],-1),v=T("li",null,[T("p",null,"用户通过在线网站预定房间时，通常只会在同一个 market （将要停留区域）内进行搜索。")],-1),X=T("li",null,[T("p",null,[m("对于用户点击过的样本集 $ \\mathcal {D}"),T("em",{n:""},"{p} $ （正样本集）而言，它们大概率位于同一片区域。考虑到负样本集 $ \\mathcal {D}"),m(" $ 是随机抽取的，大概率来源不同的区域。")])],-1),E=T("li",null,[T("p",null,"Airbnb 发现这种样本的不平衡，在学习同一片区域房源的 Embedding 时会得到次优解。")],-1),C=T("p",null,"解决办法也很简单，对于每个滑窗中的中心 lisitng，其负样本的选择新增了与其位于同一个 market 的 listing。至此，优化函数更新如下：",-1),N={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},$={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.281ex"},xmlns:"http://www.w3.org/2000/svg",width:"91.9ex",height:"6.318ex",role:"img",focusable:"false",viewBox:"0 -1342 40619.6 2792.4","aria-hidden":"true"},S=Q("",1),P=[S],F=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")]),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("mi",null,"c"),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"p")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msup",null,[T("mi",{"data-mjx-alternate":"1"},"′"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])])])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("mi",null,"c"),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])]),T("mo",null,"+"),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mi",null,"b")])])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",{stretchy:"false"},"("),T("mi",null,"l"),T("mo",null,","),T("msub",null,[T("mi",null,"m"),T("mi",null,"n")]),T("mo",{stretchy:"false"},")"),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"m"),T("mi",null,"n")])])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"m"),T("mi",null,"n")])]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l")])])])])])])])],-1),B=T("ul",null,[T("li",null,"$ \\mathcal {D}_{m_n} $ 表示与滑窗中的中心 listing 位于同一区域的负样本集。")],-1),I=Q("",34),U=T("p",null,"联合训练 User-type Embedding 和 Listing-type Embedding",-1),z=T("li",null,[T("p",null,"如下图（a），在 booking session 中，每个元素代表的是 （User-type, Listing-type）组合。"),T("ul",null,[T("li",null,"为了学习在相同向量空间中的 User-type 和 Listing-type 的 Embeddings，Airbnb 的做法是将 User-type 插入到 booking sessions 中。"),T("li",null,"形成一个（User-type, Listing-type）组成的元组序列，这样就可以让 User-type 和 Listing-type 的在 session 中的相对位置保持一致了。")])],-1),q=T("p",null,"User-type 的目标函数：",-1),G={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},J={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.294ex"},xmlns:"http://www.w3.org/2000/svg",width:"55.462ex",height:"6.33ex",role:"img",focusable:"false",viewBox:"0 -1342 24514 2797.9","aria-hidden":"true"},K=Q("",1),W=[K],Y=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")]),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"b"),T("mi",null,"o"),T("mi",null,"o"),T("mi",null,"k")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n"),T("mi",null,"e"),T("mi",null,"g")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"e"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])])])],-1),T1=T("ul",null,[T("li",null,[m("$ \\mathcal{D}"),T("em",null,"{\\text {book}} $ 中的 $ u_t $ （中心词）表示 User-type， $ c $ （上下文）表示用户最近的预定过的 Listing-type。 $ \\mathcal {D}"),m("{\\text {neg}} $ 中的 $ c $ 表示 negative Listing-type。")]),T("li",null,"$ u_t $ 表示 User-type 的 Embedding， $ \\mathbf {v}_{c}^{\\prime} $ 表示 Listing-type 的 Embedding。")],-1),Q1=T("p",null,"Listing-type 的目标函数：",-1),t1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.599ex"},xmlns:"http://www.w3.org/2000/svg",width:"58.518ex",height:"6.33ex",role:"img",focusable:"false",viewBox:"0 -1648.9 25864.8 2797.9","aria-hidden":"true"},m1=Q("",1),l1=[m1],e1=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[T("mtr",null,[T("mtd",null,[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")])]),T("mtd",null,[T("mi"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"b"),T("mi",null,"o"),T("mi",null,"o"),T("mi",null,"k")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n"),T("mi",null,"e"),T("mi",null,"g")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])])])])])])],-1),s1=T("ul",null,[T("li",null,"同理，不过窗口中的中心词为 Listing-type， 上下文为 User-type。")],-1),d1=T("p",null,"Explicit Negatives for Rejections",-1),n1=T("li",null,[T("p",null,"用户预定房源以后，还要等待房源主人的确认，主人可能接受或者拒绝客人的预定。"),T("ul",null,[T("li",null,"拒接的原因可能包括，客人星级评定不佳，资料不完整等。")])],-1),o1=T("li",null,[T("p",null,"前面学习到的 User-type Embedding 包含了客人的兴趣偏好，Listing-type Embedding 包含了房源的属性特征。"),T("ul",null,[T("li",null,"但是，用户的 Embedding 未包含更容易被哪类房源主人拒绝的潜语义信息。"),T("li",null,"房源的 Embedding 未包含主人对哪类客人的拒绝偏好。")])],-1),r1=T("p",null,"为了提高用户预定房源以后，被主人接受的概率。同时，降低房源主人拒绝客人的概率。Airbnb 在训练 User-type 和 Listing-type 的 Embedding 时，将用户预定后却被拒绝的样本加入负样本集中（如下图 b）。",-1),H1=T("p",null,"更新后，Listing-type 的目标函数：",-1),i1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.104ex"},xmlns:"http://www.w3.org/2000/svg",width:"60.267ex",height:"13.339ex",role:"img",focusable:"false",viewBox:"0 -3197.9 26638 5895.8","aria-hidden":"true"},g1=Q("",1),c1=[g1],p1=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[T("mtr",null,[T("mtd",null,[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")])]),T("mtd",null,[T("mi"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"b"),T("mi",null,"o"),T("mi",null,"o"),T("mi",null,"k")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n"),T("mi",null,"e"),T("mi",null,"g")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])])])]),T("mtr",null,[T("mtd"),T("mtd",null,[T("mi"),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mtext",null,"reject ")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])])])])])])],-1),V1=T("p",null,"更新后，User-type 的目标函数：",-1),L1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},x1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.104ex"},xmlns:"http://www.w3.org/2000/svg",width:"58.518ex",height:"13.339ex",role:"img",focusable:"false",viewBox:"0 -3197.9 25864.8 5895.8","aria-hidden":"true"},u1=Q("",1),w1=[u1],M1=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[T("mtr",null,[T("mtd",null,[T("munder",null,[T("mi",null,"argmax"),T("mi",null,"θ")])]),T("mtd",null,[T("mi"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"b"),T("mi",null,"o"),T("mi",null,"o"),T("mi",null,"k")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mo",null,"−"),T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])]),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("mi",null,"c"),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"n"),T("mi",null,"e"),T("mi",null,"g")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])])])]),T("mtr",null,[T("mtd"),T("mtd",null,[T("mi"),T("mo",null,"+"),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"∈"),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mtext",null,"reject ")])])])]),T("mi",null,"log"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mfrac",null,[T("mn",null,"1"),T("mrow",null,[T("mn",null,"1"),T("mo",null,"+"),T("msup",null,[T("mi",null,"exp"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msubsup",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])]),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{"data-mjx-alternate":"1"},"′")])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"normal"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])])])])])])])])])])],-1),f1=Q("",12),y1=T("p",null,[T("strong",null,"（2）特征构建"),m(" 对于各查询，给定的训练数据形式为： $ D_s = \\left (\\mathbf {x}"),T("em",{i:""},"{i}, y"),m("\\right), i=1 \\ldots K $ ，其中 $ K $ 表示查询返回的房源数量。")],-1),Z1=Q("",9),k1=T("p",null,"对于每个行为，还要将其按照 market （地域）进行划分。以 $ H_c $ 为例：",-1),D1=T("li",null,[T("p",null,"假如 $ H_c $ 包含了 New YorK 和 Los Angeles 两个 market 的点击记录，则划分为 $ H_c (NY) $ 和 $ H_c (LA) $ 。")],-1),b1=T("p",null,"计算候选房源和不同行为之间的相似度。",-1),j1=T("p",null,"上述 6 种行为对应的相似度特征计算方式是相同的，以 $ H_c $ 为例：",-1),O1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},R1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.043ex"},xmlns:"http://www.w3.org/2000/svg",width:"50.679ex",height:"7.001ex",role:"img",focusable:"false",viewBox:"0 -1749.5 22400.3 3094.4","aria-hidden":"true"},_1=Q("",1),A1=[_1],v1=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mi",null,"EmbClickSim"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])]),T("mo",null,","),T("msub",null,[T("mi",null,"H"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"="),T("munder",null,[T("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"max"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"m"),T("mo",null,"∈"),T("mi",null,"M")])]),T("mi",null,"cos"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])])])]),T("mo",null,","),T("munder",null,[T("mo",{"data-mjx-texclass":"OP"},"∑"),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"h")])]),T("mo",null,"∈"),T("mi",null,"m"),T("mo",null,","),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"h")])]),T("mo",null,"∈"),T("msub",null,[T("mi",null,"H"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"c")])])])]),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"h")])])])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),X1=T("li",null,[T("p",null,"其中， $ M $ 表示 market 的集合。第二项实际上为 Centroid Embedding（Embedding 的均值）。")],-1),E1=T("p",null,"除此之外，Airbnb 还计算了候选房源的 Embedding 与 latest long click 的 Embedding 之间的余弦相似度。",-1),C1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},N1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.592ex"},xmlns:"http://www.w3.org/2000/svg",width:"46.559ex",height:"2.289ex",role:"img",focusable:"false",viewBox:"0 -750 20578.9 1011.6","aria-hidden":"true"},$1=Q("",1),S1=[$1],P1=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mi",null,"EmbLastLongClickSim"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])]),T("mo",null,","),T("msub",null,[T("mi",null,"H"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"l"),T("mi",null,"c")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"="),T("mi",null,"cos"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"i")])])])]),T("mo",null,","),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mtext",null,"last ")])])])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),F1=T("p",null,[T("strong",null,"② 基于 User-type & Listing-type Embedding Features 的特征构建")],-1),B1=T("li",null,[T("p",null,"对于候选房源 $ l_i $ ，先查到其对应的 Listing-type $ l_t $ ，再找到用户的 User-type $ u_t $ 。")],-1),I1=T("p",null,"最后，计算 $ u_t $ 与 $ l_t $ 对应的 Embedding 之间的余弦相似度：",-1),U1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.592ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.822ex",height:"2.289ex",role:"img",focusable:"false",viewBox:"0 -750 21137.3 1011.6","aria-hidden":"true"},q1=Q("",1),G1=[q1],J1=T("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[T("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[T("mtext",null," UserTypeListingTypeSim "),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",null,","),T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")]),T("mo",null,"="),T("mi",null,"cos"),T("mo",{"data-mjx-texclass":"NONE"},"⁡"),T("mrow",{"data-mjx-texclass":"INNER"},[T("mo",{"data-mjx-texclass":"OPEN"},"("),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"u"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])]),T("mo",null,","),T("msub",null,[T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",{mathvariant:"bold"},"v")]),T("mrow",{"data-mjx-texclass":"ORD"},[T("msub",null,[T("mi",null,"l"),T("mrow",{"data-mjx-texclass":"ORD"},[T("mi",null,"t")])])])]),T("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),K1=Q("",7);function W1(Y1,T2,Q2,t2,a2,m2){return t(),a("div",null,[s,T("mjx-container",d,[(t(),a("svg",n,r)),H]),i,T("mjx-container",h,[(t(),a("svg",g,p)),V]),L,x,T("mjx-container",u,[(t(),a("svg",w,f)),y]),Z,k,D,b,T("mjx-container",j,[(t(),a("svg",O,_)),A]),T("ul",null,[T("li",null,[m("优化负样本的选择 "),T("ul",null,[v,X,E,T("li",null,[C,T("mjx-container",N,[(t(),a("svg",$,P)),F]),B])])])]),I,T("ul",null,[T("li",null,[U,T("ul",null,[z,T("li",null,[q,T("mjx-container",G,[(t(),a("svg",J,W)),Y]),T1]),T("li",null,[Q1,T("mjx-container",t1,[(t(),a("svg",a1,l1)),e1]),s1])])]),T("li",null,[d1,T("ul",null,[n1,o1,T("li",null,[r1,T("ul",null,[T("li",null,[H1,T("mjx-container",i1,[(t(),a("svg",h1,c1)),p1])]),T("li",null,[V1,T("mjx-container",L1,[(t(),a("svg",x1,w1)),M1])])])])])])]),f1,y1,Z1,T("ul",null,[T("li",null,[k1,T("ul",null,[D1,T("li",null,[b1,T("ul",null,[T("li",null,[j1,T("mjx-container",O1,[(t(),a("svg",R1,A1)),v1])]),X1])])])]),T("li",null,[E1,T("mjx-container",C1,[(t(),a("svg",N1,S1)),P1])])]),F1,T("ul",null,[B1,T("li",null,[I1,T("mjx-container",U1,[(t(),a("svg",z1,G1)),J1])])]),K1])}const s2=l(e,[["render",W1]]);export{e2 as __pageData,s2 as default};
