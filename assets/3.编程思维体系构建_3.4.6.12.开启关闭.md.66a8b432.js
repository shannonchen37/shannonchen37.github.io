import{_ as s,o as n,c as a,U as l}from"./chunks/framework.489e5108.js";const F=JSON.parse('{"title":"12.开启关闭","description":"","frontmatter":{},"headers":[],"relativePath":"3.编程思维体系构建/3.4.6.12.开启关闭.md","filePath":"3.编程思维体系构建/3.4.6.12.开启关闭.md","lastUpdated":1696176798000}'),p={name:"3.编程思维体系构建/3.4.6.12.开启关闭.md"},o=l(`<h1 id="_12-开启关闭" tabindex="-1">12. 开启关闭 <a class="header-anchor" href="#_12-开启关闭" aria-label="Permalink to &quot;12.开启关闭&quot;">​</a></h1><p>在上一章中，我们使用 &quot;条件&quot; 函数来使对象消失。当然，还有一个更简单的方法来实现同样的目的：只要清除对象的位置属性就可以了！</p><p>洞口是一个典型的例子，条件函数在那里工作得特别好。这是因为入口受到其他对象（守卫和银币）中的属性的影响；我们可以使用函数使得所有的逻辑都能保持一致。</p><p>让我们举一个更直接的例子。假设山洞有一扇门通向一个密室。只是一个简单的门洞，玩家可以打开和关闭。就像前一章一样，我们将使用两个对象来表示这个通道；一个表示打开的门，另一个表示门关闭时。</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">- backroom</span></span>
<span class="line"><span style="color:#e1e4e8;">     description &quot;a backroom&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     tags        &quot;backroom&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     details     &quot;The room is dusty and messy.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">- openDoorToBackroom</span></span>
<span class="line"><span style="color:#e1e4e8;">     description &quot;an open door to the south&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     tags        &quot;south&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     destination backroom</span></span>
<span class="line"><span style="color:#e1e4e8;">     details     &quot;The door is open.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     textGo      &quot;You walk through the door into the backroom.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">- closedDoorToBackroom</span></span>
<span class="line"><span style="color:#e1e4e8;">     description &quot;a closed door to the south&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     tags        &quot;south&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     location    cave</span></span>
<span class="line"><span style="color:#e1e4e8;">     prospect    backroom</span></span>
<span class="line"><span style="color:#e1e4e8;">     details     &quot;The door is closed.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     textGo      &quot;The door is closed.\\n&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">- backroom</span></span>
<span class="line"><span style="color:#24292e;">     description &quot;a backroom&quot;</span></span>
<span class="line"><span style="color:#24292e;">     tags        &quot;backroom&quot;</span></span>
<span class="line"><span style="color:#24292e;">     details     &quot;The room is dusty and messy.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">- openDoorToBackroom</span></span>
<span class="line"><span style="color:#24292e;">     description &quot;an open door to the south&quot;</span></span>
<span class="line"><span style="color:#24292e;">     tags        &quot;south&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292e;">     destination backroom</span></span>
<span class="line"><span style="color:#24292e;">     details     &quot;The door is open.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;">     textGo      &quot;You walk through the door into the backroom.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">- closedDoorToBackroom</span></span>
<span class="line"><span style="color:#24292e;">     description &quot;a closed door to the south&quot;</span></span>
<span class="line"><span style="color:#24292e;">     tags        &quot;south&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292e;">     location    cave</span></span>
<span class="line"><span style="color:#24292e;">     prospect    backroom</span></span>
<span class="line"><span style="color:#24292e;">     details     &quot;The door is closed.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;">     textGo      &quot;The door is closed.\\n&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">🤔 思考题：尝试自己用 C 语言实现</p></div><p>自然，门也应该能从另一侧进入。</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">- openDoorToCave</span></span>
<span class="line"><span style="color:#e1e4e8;">     description &quot;an open door to the north&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     tags        &quot;north&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     destination cave</span></span>
<span class="line"><span style="color:#e1e4e8;">     details     &quot;The door is open.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     textGo      &quot;You walk through the door into the cave.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">- closedDoorToCave</span></span>
<span class="line"><span style="color:#e1e4e8;">     description &quot;a closed door to the north&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     tags        &quot;north&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     location    backroom</span></span>
<span class="line"><span style="color:#e1e4e8;">     prospect    cave</span></span>
<span class="line"><span style="color:#e1e4e8;">     details     &quot;The door is closed.\\n&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">     textGo      &quot;The door is closed.\\n&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">- openDoorToCave</span></span>
<span class="line"><span style="color:#24292e;">     description &quot;an open door to the north&quot;</span></span>
<span class="line"><span style="color:#24292e;">     tags        &quot;north&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292e;">     destination cave</span></span>
<span class="line"><span style="color:#24292e;">     details     &quot;The door is open.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;">     textGo      &quot;You walk through the door into the cave.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">- closedDoorToCave</span></span>
<span class="line"><span style="color:#24292e;">     description &quot;a closed door to the north&quot;</span></span>
<span class="line"><span style="color:#24292e;">     tags        &quot;north&quot;, &quot;door&quot;, &quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292e;">     location    backroom</span></span>
<span class="line"><span style="color:#24292e;">     prospect    cave</span></span>
<span class="line"><span style="color:#24292e;">     details     &quot;The door is closed.\\n&quot;</span></span>
<span class="line"><span style="color:#24292e;">     textGo      &quot;The door is closed.\\n&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>注意我们只给封闭的门洞一个位置，开放的门洞没有。所以一开始，门是关闭的（因此你在右边看到的生成的地图中，山洞和密室之间有虚线箭头）。要打开门，我们所要做的就是交换位置。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">openDoorToBackroom</span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cave;</span></span>
<span class="line"><span style="color:#E1E4E8;">closedDoorToBackroom</span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">openDoorToCave</span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> backroom;</span></span>
<span class="line"><span style="color:#E1E4E8;">closedDoorToCave</span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">openDoorToBackroom</span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;">location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> cave;</span></span>
<span class="line"><span style="color:#24292E;">closedDoorToBackroom</span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;">location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">openDoorToCave</span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;">location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> backroom;</span></span>
<span class="line"><span style="color:#24292E;">closedDoorToCave</span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;">location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>接下来，让我们创建一个辅助函数来适应这种情况。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(OBJECT </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">obj1</span><span style="color:#E1E4E8;">, OBJECT </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">obj2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">tmp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> obj1-&gt;location;</span></span>
<span class="line"><span style="color:#E1E4E8;">   obj1-&gt;location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> obj2-&gt;location;</span></span>
<span class="line"><span style="color:#E1E4E8;">   obj2-&gt;location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> tmp;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">obj1</span><span style="color:#24292E;">, OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">obj2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">tmp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> obj1-&gt;location;</span></span>
<span class="line"><span style="color:#24292E;">   obj1-&gt;location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> obj2-&gt;location;</span></span>
<span class="line"><span style="color:#24292E;">   obj2-&gt;location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> tmp;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>现在可以用下面的语句来打开这扇门；一旦它被打开，同样的语句将再次关闭它。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(openDoorToBackroom, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(openDoorToCave, closedDoorToCave);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(openDoorToBackroom, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(openDoorToCave, closedDoorToCave);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>函数 swapLocations 不依赖于固定的位置，因为它在两个对象之间来回传递当前位置。</p><p>当相关对象是可移动的时候，辅助功能就特别方便。例如，一个盒子可以被打开和关闭，但它也是一个可以被拿起并移动到其他地方的物品。换句话说，它的位置是不固定的。</p><p>当然，一个盒子不是一个通道：玩家总是在盒子外面。所以一对物体就够了，也就是说，我们调用一次 swapLocations 函数就够了。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(openBox, closedBox);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(openBox, closedBox);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这或多或少是我们实现一些新命令 open 和 close 所需要的。下面是 open 的一个简单实现；close 的实现也类似。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">parseObject</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> closedDoorToBackRoom </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> closedDoorToCave)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(openDoorToBackroom, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(openDoorToCave, closedDoorToCave);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;OK.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> closedBox)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(openBox, closedBox);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;OK.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> openDoorToBackRoom </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> openDoorToCave </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> openBox)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is already open.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">else</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That cannot be opened.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">parseObject</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> closedDoorToBackRoom </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> closedDoorToCave)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(openDoorToBackroom, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(openDoorToCave, closedDoorToCave);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;OK.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> closedBox)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(openBox, closedBox);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;OK.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> openDoorToBackRoom </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> openDoorToCave </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> openBox)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is already open.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">else</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That cannot be opened.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">🤔 思考题：你能不能仿照上面的代码实现 close 功能？</p></div><p>为了使事情稍微复杂一些，我们可以在门上或盒子上加一把锁。这需要（至少）三个相互排斥的对象；每个可能的状态都有一个：打开、关闭和锁定。但是我们仍然可以使用同一个函数来交换对象的位置。例如，这里是如何解锁一个上锁的盒子；反之亦然。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(closedBox, lockedBox);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(closedBox, lockedBox);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>但这仅仅是不够的，我们对命令 open 的实现必须进行扩展，以处理新的对象 lockedBox。</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> lockedBox)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;You can&#39;t, it is locked.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> lockedBox)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;You can&#39;t, it is locked.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>显然，代码的行数与游戏中的门（以及盒子和其他可以打开的物体）的数量成正比。因此，如果你的游戏有不止几扇门，那么选择一个更通用的解决方案是个好主意。顺便说一下，这对每一个命令都是适用的：当它涉及到许多物体时，尽量写通用代码；但当你处理一两个特殊情况时，就坚持使用直接的、专门的代码。</p><div class="warning custom-block"><p class="custom-block-title">🤔 思考题：</p><p>我们可以使用什么方法来解决这个问题？</p><p>提示：C++ 中的模板功能（这只是一种选择）</p><p>下面我们将揭晓答案</p></div><p>通用代码通常带有数据驱动的方法。换句话说，我们需要向我们的对象结构添加一个或多个属性。在这种特殊情况下，我们将为我们希望支持的每个命令添加一个函数指针：打开、关闭、锁定和解锁。</p><h2 id="object-txt" tabindex="-1">object.txt <a class="header-anchor" href="#object-txt" aria-label="Permalink to &quot;object.txt&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;object.h&quot;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;toggle.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">typedef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">struct</span><span style="color:#E1E4E8;"> object {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">bool</span><span style="color:#E1E4E8;">         (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">condition)(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">description;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">tags;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">struct</span><span style="color:#E1E4E8;"> object </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">location;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">struct</span><span style="color:#E1E4E8;"> object </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">destination;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">struct</span><span style="color:#E1E4E8;"> object </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">prospect;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">details;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">contents;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">textGo;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">            weight;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">            capacity;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">            health;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">         (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">open)(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">         (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">close)(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">         (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">lock)(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">         (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">unlock)(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">} OBJECT;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> OBJECT objs</span><span style="color:#F97583;">[]</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> field</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;an open field&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;field&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The field is a nice and quiet place under a clear blue sky.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     capacity    </span><span style="color:#79B8FF;">9999</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a little cave&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;cave&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The cave is just a cold, damp, rocky chamber.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     capacity    </span><span style="color:#79B8FF;">9999</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> silver</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a silver coin&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;silver&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;coin&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;silver coin&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    field</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The coin has an eagle on the obverse.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     weight      </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> gold</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a gold coin&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;gold&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;coin&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;gold coin&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    openBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The shiny coin seems to be a rare and priceless artefact.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     weight      </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> guard</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a burly guard&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;guard&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;burly guard&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    field</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The guard is a really big fellow.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     contents    </span><span style="color:#9ECBFF;">&quot;He has&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     health      </span><span style="color:#79B8FF;">100</span></span>
<span class="line"><span style="color:#E1E4E8;">     capacity    </span><span style="color:#79B8FF;">20</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> player</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;yourself&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;yourself&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    field</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;You would need a mirror to look at yourself.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     contents    </span><span style="color:#9ECBFF;">&quot;You have&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     health      </span><span style="color:#79B8FF;">100</span></span>
<span class="line"><span style="color:#E1E4E8;">     capacity    </span><span style="color:#79B8FF;">20</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> intoCave</span></span>
<span class="line"><span style="color:#E1E4E8;">     condition   { </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> guard-&gt;health </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> silver-&gt;location </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> guard; }</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a cave entrance to the east&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;east&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;entrance&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    field</span></span>
<span class="line"><span style="color:#E1E4E8;">     destination cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The entrance is just a narrow opening in a small outcrop.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;You walk into the cave.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> intoCaveBlocked</span></span>
<span class="line"><span style="color:#E1E4E8;">     condition   { </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> guard-&gt;health </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> silver-&gt;location </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> guard; }</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a cave entrance to the east&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;east&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;entrance&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    field</span></span>
<span class="line"><span style="color:#E1E4E8;">     prospect    cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The entrance is just a narrow opening in a small outcrop.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;The guard stops you from walking into the cave.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> exitCave</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;an exit to the west&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;west&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;exit&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     destination field</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;Sunlight pours in through an opening in the cave&#39;s wall.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;You walk out of the cave.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> wallField</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;dense forest all around&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;west&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;north&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;south&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;forest&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    field</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The field is surrounded by trees and undergrowth.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;Dense forest is blocking the way.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> wallCave</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;solid rock all around&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;east&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;north&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;rock&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;Carved in stone is a secret password &#39;abccb&#39;.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;Solid rock is blocking the way.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> backroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a backroom&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;backroom&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The room is dusty and messy.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     capacity    </span><span style="color:#79B8FF;">9999</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> wallBackroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;solid rock all around&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;east&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;west&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;south&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;rock&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    backroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;Trendy wallpaper covers the rock walls.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;Solid rock is blocking the way.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> openDoorToBackroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;an open door to the south&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;south&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;door&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     destination backroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The door is open.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;You walk through the door into a backroom.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isAlreadyOpen</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       toggleDoorToBackroom</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> closedDoorToBackroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a closed door to the south&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;south&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;door&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     prospect    backroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        toggleDoorToBackroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       isAlreadyClosed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> openDoorToCave</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;an open door to the north&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;north&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;door&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     destination cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The door is open.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;You walk through the door into the cave.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isAlreadyOpen</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       toggleDoorToCave</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> closedDoorToCave</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a closed door to the north&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;north&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;door&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    backroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     prospect    cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     textGo      </span><span style="color:#9ECBFF;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        toggleDoorToCave</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       isAlreadyClosed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> openBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a wooden box&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;box&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;wooden box&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The box is open.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     weight      </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">     capacity    </span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isAlreadyOpen</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       toggleBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     lock        isStillOpen</span></span>
<span class="line"><span style="color:#E1E4E8;">     unlock      isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> closedBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a wooden box&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;box&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;wooden box&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The box is closed.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     weight      </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        toggleBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       isAlreadyClosed</span></span>
<span class="line"><span style="color:#E1E4E8;">     lock        toggleBoxLock</span></span>
<span class="line"><span style="color:#E1E4E8;">     unlock      isAlreadyUnlocked</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> lockedBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a wooden box&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;box&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;wooden box&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    backroom</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The box is closed.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     weight      </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">     open        isStillLocked</span></span>
<span class="line"><span style="color:#E1E4E8;">     close       isAlreadyClosed</span></span>
<span class="line"><span style="color:#E1E4E8;">     lock        isAlreadyLocked</span></span>
<span class="line"><span style="color:#E1E4E8;">     unlock      toggleBoxLock</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> keyForBox</span></span>
<span class="line"><span style="color:#E1E4E8;">     description </span><span style="color:#9ECBFF;">&quot;a tiny key&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     tags        </span><span style="color:#9ECBFF;">&quot;key&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;tiny key&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     location    cave</span></span>
<span class="line"><span style="color:#E1E4E8;">     details     </span><span style="color:#9ECBFF;">&quot;The key is really small and shiny.&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">     weight      </span><span style="color:#79B8FF;">1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;object.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;toggle.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">typedef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">struct</span><span style="color:#24292E;"> object {</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">bool</span><span style="color:#24292E;">         (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">condition)(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">description;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">**</span><span style="color:#24292E;">tags;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">struct</span><span style="color:#24292E;"> object </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">location;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">struct</span><span style="color:#24292E;"> object </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">destination;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">struct</span><span style="color:#24292E;"> object </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">prospect;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">details;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">contents;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">textGo;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">            weight;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">            capacity;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">            health;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">void</span><span style="color:#24292E;">         (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">open)(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">void</span><span style="color:#24292E;">         (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">close)(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">void</span><span style="color:#24292E;">         (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">lock)(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">void</span><span style="color:#24292E;">         (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">unlock)(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">} OBJECT;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> OBJECT objs</span><span style="color:#D73A49;">[]</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> field</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;an open field&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;field&quot;</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The field is a nice and quiet place under a clear blue sky.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     capacity    </span><span style="color:#005CC5;">9999</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> cave</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a little cave&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;cave&quot;</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The cave is just a cold, damp, rocky chamber.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     capacity    </span><span style="color:#005CC5;">9999</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> silver</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a silver coin&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;silver&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;coin&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;silver coin&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    field</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The coin has an eagle on the obverse.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     weight      </span><span style="color:#005CC5;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> gold</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a gold coin&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;gold&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;coin&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;gold coin&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    openBox</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The shiny coin seems to be a rare and priceless artefact.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     weight      </span><span style="color:#005CC5;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> guard</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a burly guard&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;guard&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;burly guard&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    field</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The guard is a really big fellow.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     contents    </span><span style="color:#032F62;">&quot;He has&quot;</span></span>
<span class="line"><span style="color:#24292E;">     health      </span><span style="color:#005CC5;">100</span></span>
<span class="line"><span style="color:#24292E;">     capacity    </span><span style="color:#005CC5;">20</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> player</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;yourself&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;yourself&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    field</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;You would need a mirror to look at yourself.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     contents    </span><span style="color:#032F62;">&quot;You have&quot;</span></span>
<span class="line"><span style="color:#24292E;">     health      </span><span style="color:#005CC5;">100</span></span>
<span class="line"><span style="color:#24292E;">     capacity    </span><span style="color:#005CC5;">20</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> intoCave</span></span>
<span class="line"><span style="color:#24292E;">     condition   { </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> guard-&gt;health </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> silver-&gt;location </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> guard; }</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a cave entrance to the east&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;east&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;entrance&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    field</span></span>
<span class="line"><span style="color:#24292E;">     destination cave</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The entrance is just a narrow opening in a small outcrop.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;You walk into the cave.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> intoCaveBlocked</span></span>
<span class="line"><span style="color:#24292E;">     condition   { </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> guard-&gt;health </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> silver-&gt;location </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> guard; }</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a cave entrance to the east&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;east&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;entrance&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    field</span></span>
<span class="line"><span style="color:#24292E;">     prospect    cave</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The entrance is just a narrow opening in a small outcrop.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;The guard stops you from walking into the cave.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> exitCave</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;an exit to the west&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;west&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;exit&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    cave</span></span>
<span class="line"><span style="color:#24292E;">     destination field</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;Sunlight pours in through an opening in the cave&#39;s wall.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;You walk out of the cave.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> wallField</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;dense forest all around&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;west&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;north&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;south&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;forest&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    field</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The field is surrounded by trees and undergrowth.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;Dense forest is blocking the way.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> wallCave</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;solid rock all around&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;east&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;north&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;rock&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    cave</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;Carved in stone is a secret password &#39;abccb&#39;.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;Solid rock is blocking the way.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> backroom</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a backroom&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;backroom&quot;</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The room is dusty and messy.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     capacity    </span><span style="color:#005CC5;">9999</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> wallBackroom</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;solid rock all around&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;east&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;west&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;south&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;rock&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    backroom</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;Trendy wallpaper covers the rock walls.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;Solid rock is blocking the way.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> openDoorToBackroom</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;an open door to the south&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;south&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;door&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292E;">     destination backroom</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The door is open.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;You walk through the door into a backroom.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        isAlreadyOpen</span></span>
<span class="line"><span style="color:#24292E;">     close       toggleDoorToBackroom</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> closedDoorToBackroom</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a closed door to the south&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;south&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;door&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    cave</span></span>
<span class="line"><span style="color:#24292E;">     prospect    backroom</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        toggleDoorToBackroom</span></span>
<span class="line"><span style="color:#24292E;">     close       isAlreadyClosed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> openDoorToCave</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;an open door to the north&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;north&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;door&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292E;">     destination cave</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The door is open.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;You walk through the door into the cave.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        isAlreadyOpen</span></span>
<span class="line"><span style="color:#24292E;">     close       toggleDoorToCave</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> closedDoorToCave</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a closed door to the north&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;north&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;door&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;doorway&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    backroom</span></span>
<span class="line"><span style="color:#24292E;">     prospect    cave</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     textGo      </span><span style="color:#032F62;">&quot;The door is closed.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     open        toggleDoorToCave</span></span>
<span class="line"><span style="color:#24292E;">     close       isAlreadyClosed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> openBox</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a wooden box&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;box&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;wooden box&quot;</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The box is open.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     weight      </span><span style="color:#005CC5;">5</span></span>
<span class="line"><span style="color:#24292E;">     capacity    </span><span style="color:#005CC5;">10</span></span>
<span class="line"><span style="color:#24292E;">     open        isAlreadyOpen</span></span>
<span class="line"><span style="color:#24292E;">     close       toggleBox</span></span>
<span class="line"><span style="color:#24292E;">     lock        isStillOpen</span></span>
<span class="line"><span style="color:#24292E;">     unlock      isAlreadyOpen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> closedBox</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a wooden box&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;box&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;wooden box&quot;</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The box is closed.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     weight      </span><span style="color:#005CC5;">5</span></span>
<span class="line"><span style="color:#24292E;">     open        toggleBox</span></span>
<span class="line"><span style="color:#24292E;">     close       isAlreadyClosed</span></span>
<span class="line"><span style="color:#24292E;">     lock        toggleBoxLock</span></span>
<span class="line"><span style="color:#24292E;">     unlock      isAlreadyUnlocked</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> lockedBox</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a wooden box&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;box&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;wooden box&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    backroom</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The box is closed.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     weight      </span><span style="color:#005CC5;">5</span></span>
<span class="line"><span style="color:#24292E;">     open        isStillLocked</span></span>
<span class="line"><span style="color:#24292E;">     close       isAlreadyClosed</span></span>
<span class="line"><span style="color:#24292E;">     lock        isAlreadyLocked</span></span>
<span class="line"><span style="color:#24292E;">     unlock      toggleBoxLock</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;"> keyForBox</span></span>
<span class="line"><span style="color:#24292E;">     description </span><span style="color:#032F62;">&quot;a tiny key&quot;</span></span>
<span class="line"><span style="color:#24292E;">     tags        </span><span style="color:#032F62;">&quot;key&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;tiny key&quot;</span></span>
<span class="line"><span style="color:#24292E;">     location    cave</span></span>
<span class="line"><span style="color:#24292E;">     details     </span><span style="color:#032F62;">&quot;The key is really small and shiny.&quot;</span></span>
<span class="line"><span style="color:#24292E;">     weight      </span><span style="color:#005CC5;">1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br></div></div><p>注意：</p><ul><li>第 89 行：乍一看，isAlreadyOpen 在这里似乎不合适；从技术上讲，intoCaveBlocked 是一个封闭的通道。但从故事上讲，它是一个不错的开场白。</li><li>第 169、180、191 行。如果你喜欢沉重的宝箱而不是盒子，那么你所要做的就是增加重量（并相应调整相关文字和标签）。</li></ul><p>为了避免重复的代码，我们这次特意没有使用匿名函数。相反，我们将在一个单独的模块中实现必要的逻辑。函数 swapLocations 也在其中，这不过是一个稍微扩展的版本，它也会向用户输出反馈。</p><h2 id="toggle-h" tabindex="-1">toggle.h <a class="header-anchor" href="#toggle-h" aria-label="Permalink to &quot;toggle.h&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeOpened</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeClosed</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeLocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeUnlocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyClosed</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyLocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyUnlocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isStillOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isStillLocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleDoorToBackroom</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleDoorToCave</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleBox</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleBoxLock</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeOpened</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeClosed</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeLocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeUnlocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyOpen</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyClosed</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyLocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyUnlocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isStillOpen</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isStillLocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleDoorToBackroom</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleDoorToCave</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleBox</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleBoxLock</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="toggle-c" tabindex="-1">toggle.c <a class="header-anchor" href="#toggle-c" aria-label="Permalink to &quot;toggle.c&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;object.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">verb1</span><span style="color:#E1E4E8;">, OBJECT </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">obj1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                          </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">verb2</span><span style="color:#E1E4E8;">, OBJECT </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">obj2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">tmp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> obj1-&gt;location;</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> tmp </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> obj1 </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> obj2;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">verb </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> tmp </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> verb1 </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> verb2;</span></span>
<span class="line"><span style="color:#E1E4E8;">   obj1-&gt;location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> obj2-&gt;location;</span></span>
<span class="line"><span style="color:#E1E4E8;">   obj2-&gt;location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> tmp;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (verb </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">) </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;You </span><span style="color:#79B8FF;">%s</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">%s</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, verb, obj-&gt;description);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeOpened</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)    { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That cannot be opened.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);    }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeClosed</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)    { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That cannot be closed.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);    }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeLocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)    { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That cannot be locked.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);    }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cannotBeUnlocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)  { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That cannot be unlocked.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)     { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is already open.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);     }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyClosed</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)   { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is already closed.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);   }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyLocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)   { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is already locked.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);   }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isAlreadyUnlocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">) { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is already unlocked.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">); }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isStillOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)       { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is still open.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);       }</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isStillLocked</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)     { </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;That is locked.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);           }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleDoorToBackroom</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, openDoorToCave, </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, closedDoorToCave);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;close&quot;</span><span style="color:#E1E4E8;">, openDoorToBackroom, </span><span style="color:#9ECBFF;">&quot;open&quot;</span><span style="color:#E1E4E8;">, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleDoorToCave</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, openDoorToBackroom, </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;close&quot;</span><span style="color:#E1E4E8;">, openDoorToCave, </span><span style="color:#9ECBFF;">&quot;open&quot;</span><span style="color:#E1E4E8;">, closedDoorToCave);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleBox</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;close&quot;</span><span style="color:#E1E4E8;">, openBox, </span><span style="color:#9ECBFF;">&quot;open&quot;</span><span style="color:#E1E4E8;">, closedBox);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toggleBoxLock</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (keyForBox-&gt;location </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> player)</span></span>
<span class="line"><span style="color:#E1E4E8;">   {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">swapLocations</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;lock&quot;</span><span style="color:#E1E4E8;">, closedBox, </span><span style="color:#9ECBFF;">&quot;unlock&quot;</span><span style="color:#E1E4E8;">, lockedBox);</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">else</span></span>
<span class="line"><span style="color:#E1E4E8;">   {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;You don&#39;t have a key.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;object.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">verb1</span><span style="color:#24292E;">, OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">obj1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                          </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">verb2</span><span style="color:#24292E;">, OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">obj2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">tmp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> obj1-&gt;location;</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> tmp </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> obj1 </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> obj2;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">verb </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> tmp </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> verb1 </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> verb2;</span></span>
<span class="line"><span style="color:#24292E;">   obj1-&gt;location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> obj2-&gt;location;</span></span>
<span class="line"><span style="color:#24292E;">   obj2-&gt;location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> tmp;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (verb </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">) </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;You </span><span style="color:#005CC5;">%s</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">%s</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, verb, obj-&gt;description);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeOpened</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)    { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That cannot be opened.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);    }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeClosed</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)    { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That cannot be closed.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);    }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeLocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)    { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That cannot be locked.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);    }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cannotBeUnlocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)  { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That cannot be unlocked.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyOpen</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)     { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is already open.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);     }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyClosed</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)   { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is already closed.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);   }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyLocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)   { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is already locked.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);   }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isAlreadyUnlocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">) { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is already unlocked.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">); }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isStillOpen</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)       { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is still open.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);       }</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isStillLocked</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)     { </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;That is locked.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);           }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleDoorToBackroom</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, openDoorToCave, </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, closedDoorToCave);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;close&quot;</span><span style="color:#24292E;">, openDoorToBackroom, </span><span style="color:#032F62;">&quot;open&quot;</span><span style="color:#24292E;">, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleDoorToCave</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, openDoorToBackroom, </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, closedDoorToBackroom);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;close&quot;</span><span style="color:#24292E;">, openDoorToCave, </span><span style="color:#032F62;">&quot;open&quot;</span><span style="color:#24292E;">, closedDoorToCave);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleBox</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;close&quot;</span><span style="color:#24292E;">, openBox, </span><span style="color:#032F62;">&quot;open&quot;</span><span style="color:#24292E;">, closedBox);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toggleBoxLock</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (keyForBox-&gt;location </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> player)</span></span>
<span class="line"><span style="color:#24292E;">   {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">swapLocations</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;lock&quot;</span><span style="color:#24292E;">, closedBox, </span><span style="color:#032F62;">&quot;unlock&quot;</span><span style="color:#24292E;">, lockedBox);</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">else</span></span>
<span class="line"><span style="color:#24292E;">   {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;You don&#39;t have a key.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>正如前面所宣布的，打开、关闭、锁定和解锁这四个命令的实现是完全通用的。</p><h2 id="openclose-h" tabindex="-1">openclose.h <a class="header-anchor" href="#openclose-h" aria-label="Permalink to &quot;openclose.h&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeClose</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeLock</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeUnlock</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeOpen</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeClose</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeLock</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeUnlock</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="openclose-c" tabindex="-1">openclose.c <a class="header-anchor" href="#openclose-c" aria-label="Permalink to &quot;openclose.c&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;object.h&quot;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;reach.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeOpen</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reachableObject</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;what you want to open&quot;</span><span style="color:#E1E4E8;">, noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">) (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj-&gt;open)();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeClose</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reachableObject</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;what you want to close&quot;</span><span style="color:#E1E4E8;">, noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">) (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj-&gt;close)();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeLock</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reachableObject</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;what you want to lock&quot;</span><span style="color:#E1E4E8;">, noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">) (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj-&gt;lock)();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">executeUnlock</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reachableObject</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;what you want to unlock&quot;</span><span style="color:#E1E4E8;">, noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (obj </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">) (</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj-&gt;unlock)();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;object.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;reach.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeOpen</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reachableObject</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;what you want to open&quot;</span><span style="color:#24292E;">, noun);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">) (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj-&gt;open)();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeClose</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reachableObject</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;what you want to close&quot;</span><span style="color:#24292E;">, noun);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">) (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj-&gt;close)();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeLock</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reachableObject</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;what you want to lock&quot;</span><span style="color:#24292E;">, noun);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">) (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj-&gt;lock)();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">executeUnlock</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reachableObject</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;what you want to unlock&quot;</span><span style="color:#24292E;">, noun);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (obj </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">) (</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj-&gt;unlock)();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>上面，我们使用了一个通用函数 reachableObject 来处理不在这里的对象；其实现见下文。这样，我们就不必把同样的代码写四遍（每个执行函数写一遍）。更多的命令将在第 15 章中加入；这些命令将受益于同样的函数。</p><h2 id="reach-h" tabindex="-1">reach.h <a class="header-anchor" href="#reach-h" aria-label="Permalink to &quot;reach.h&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">extern</span><span style="color:#E1E4E8;"> OBJECT </span><span style="color:#F97583;">*</span><span style="color:#B392F0;">reachableObject</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">intention</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">extern</span><span style="color:#24292E;"> OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#6F42C1;">reachableObject</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">intention</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="reach-c" tabindex="-1">reach.c <a class="header-anchor" href="#reach-c" aria-label="Permalink to &quot;reach.c&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;object.h&quot;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;misc.h&quot;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;noun.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">OBJECT </span><span style="color:#F97583;">*</span><span style="color:#B392F0;">reachableObject</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">intention</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">noun</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   OBJECT </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getVisible</span><span style="color:#E1E4E8;">(intention, noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">switch</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">getDistance</span><span style="color:#E1E4E8;">(player, obj))</span></span>
<span class="line"><span style="color:#E1E4E8;">   {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> distSelf:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;You should not be doing that to yourself.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> distHeldContained:</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> distHereContained:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;You would have to get it from </span><span style="color:#79B8FF;">%s</span><span style="color:#9ECBFF;"> first.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">             obj</span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;">location</span><span style="color:#F97583;">-&gt;</span><span style="color:#FFAB70;">description</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> distOverthere:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Too far away, move closer please.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> distNotHere:</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> distUnknownObject:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// already handled by getVisible</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> obj;</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;object.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;misc.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;noun.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#6F42C1;">reachableObject</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">intention</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">noun</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   OBJECT </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getVisible</span><span style="color:#24292E;">(intention, noun);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">switch</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">getDistance</span><span style="color:#24292E;">(player, obj))</span></span>
<span class="line"><span style="color:#24292E;">   {</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> distSelf:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;You should not be doing that to yourself.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> distHeldContained:</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> distHereContained:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;You would have to get it from </span><span style="color:#005CC5;">%s</span><span style="color:#032F62;"> first.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">             obj</span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;">location</span><span style="color:#D73A49;">-&gt;</span><span style="color:#E36209;">description</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> distOverthere:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Too far away, move closer please.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> distNotHere:</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> distUnknownObject:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// already handled by getVisible</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">default</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> obj;</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>同样，我们也要对 parsexec.c 进行补充</p><h2 id="parsexec-c" tabindex="-1">parsexec.c <a class="header-anchor" href="#parsexec-c" aria-label="Permalink to &quot;parsexec.c&quot;">​</a></h2><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;string.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;location.h&quot;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;inventory.h&quot;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;openclose.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">bool</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">parseAndExecute</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#FFAB70;">input</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">verb </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">strtok</span><span style="color:#E1E4E8;">(input, </span><span style="color:#9ECBFF;">&quot; </span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">noun </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">strtok</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (verb </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NULL</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">   {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;quit&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;look&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeLook</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;go&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeGo</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;get&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeGet</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;drop&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeDrop</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;give&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeGive</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;ask&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeAsk</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;inventory&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeInventory</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;open&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeOpen</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;close&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeClose</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;lock&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeLock</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">strcmp</span><span style="color:#E1E4E8;">(verb, </span><span style="color:#9ECBFF;">&quot;unlock&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">executeUnlock</span><span style="color:#E1E4E8;">(noun);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">else</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;I don&#39;t know how to &#39;</span><span style="color:#79B8FF;">%s</span><span style="color:#9ECBFF;">&#39;.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, verb);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">   }</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdbool.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;string.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;location.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;inventory.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;openclose.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">bool</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">parseAndExecute</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">input</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">verb </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">strtok</span><span style="color:#24292E;">(input, </span><span style="color:#032F62;">&quot; </span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">noun </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">strtok</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (verb </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">   {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;quit&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;look&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeLook</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;go&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeGo</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;get&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeGet</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;drop&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeDrop</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;give&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeGive</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;ask&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeAsk</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;inventory&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeInventory</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;open&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeOpen</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;close&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeClose</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;lock&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeLock</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">strcmp</span><span style="color:#24292E;">(verb, </span><span style="color:#032F62;">&quot;unlock&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">executeUnlock</span><span style="color:#24292E;">(noun);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">else</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;I don&#39;t know how to &#39;</span><span style="color:#005CC5;">%s</span><span style="color:#032F62;">&#39;.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, verb);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><p>注意：</p><ul><li>你可能已经注意到，object.txt 在本章中的大小几乎增加了一倍。我们已经可以向你保证，这只是一个开始。object.txt 是我们游戏数据的主要来源；一旦我们认真开始添加地点、物品和演员，行数很容易就会增加到数千行。</li><li>除了门和锁之外，函数 swapLocation 还可以用于许多其他事情。在第 15 章，它将再次被使用，这次是用来打开和关闭灯。</li><li>正如你在样本输出中所看到的，玩家可以从盒子里拿到金子，但他无法再把金子放回去！我们的解析器无法处理像把硬币放进盒子这样的 &quot;复杂&quot; 命令。因此，在下一章中，我们将编写一个全新的解析器：目前的双线实现急需更换！</li></ul><p>输出样例</p><p>Welcome to Little Cave Adventure. You are in an open field. You see: a silver coin a burly guard a cave entrance to the east dense forest all around</p><p>--&gt; get coin You pick up a silver coin.</p><p>--&gt; give coin You give a silver coin to a burly guard.</p><p>--&gt; go cave You walk into the cave.</p><p>You are in a little cave. You see: an exit to the west solid rock all around a closed door to the south a tiny key</p><p>--&gt; get key You pick up a tiny key.</p><p>--&gt; go south The door is closed.</p><p>--&gt; open door You open a closed door to the south.</p><p>--&gt; go south You walk through the door into a backroom.</p><p>You are in a backroom. You see: solid rock all around an open door to the north a wooden box</p><p>--&gt; unlock box You unlock a wooden box.</p><p>--&gt; open box You open a wooden box.</p><p>--&gt; look box The box is open. You see: a gold coin</p><p>--&gt; get gold You get a gold coin from a wooden box.</p><p>--&gt; quit</p><p>Bye!</p>`,69),e=[o];function c(t,r,E,y,i,u){return n(),a("div",null,e)}const d=s(p,[["render",c]]);export{F as __pageData,d as default};
