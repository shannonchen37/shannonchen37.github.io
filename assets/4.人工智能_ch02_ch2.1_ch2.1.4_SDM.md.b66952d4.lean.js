import{_ as T,o as s,c as Q,j as a,a as t,U as e}from"./chunks/framework.489e5108.js";const c5=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"4.人工智能/ch02/ch2.1/ch2.1.4/SDM.md","filePath":"4.人工智能/ch02/ch2.1/ch2.1.4/SDM.md","lastUpdated":1696176798000}'),l={name:"4.人工智能/ch02/ch2.1/ch2.1.4/SDM.md"},n=e("",19),o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.063ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.554ex",height:"1.609ex",role:"img",focusable:"false",viewBox:"0 -683 687 711","aria-hidden":"true"},p=e("",1),m=[p],d=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"U")])])],-1),i={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.452ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 642 683","aria-hidden":"true"},h=e("",1),g=[h],u=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"I")])])],-1),y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.817ex",height:"1.441ex",role:"img",focusable:"false",viewBox:"0 -626 361 637","aria-hidden":"true"},H=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})])])],-1),_=[H],E=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"t")])],-1),w={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},f=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D462",d:"M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1),b=[f],D=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"u")])],-1),M={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},k=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1),Z=[k],j=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"i")])],-1),A={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},F=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D462",d:"M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1),R=[F],O=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"u")])],-1),C=a("ol",null,[a("li",null,"相同会话 ID 的商品 (后台能获取) 算是一个会话"),a("li",null,"相邻的商品，时间间隔小于 10 分钟 (业务自己调整) 算一个会话"),a("li",null,"同一个会话中的商品不能超过 50 个，多出来的放入下一个会话")],-1),S={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},X=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D462",d:"M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1),N=[X],q=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"u")])],-1),I={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"23.169ex",height:"2.366ex",role:"img",focusable:"false",viewBox:"0 -750 10240.6 1045.7","aria-hidden":"true"},z=e("",1),G=[z],J=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"S")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"["),a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"m")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},"]")])])],-1),W={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.986ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 878 453","aria-hidden":"true"},U=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D45A",d:"M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1),$=[U],Y=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"m")])],-1),a1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.664ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -705 1177.5 727","aria-hidden":"true"},s1=e("",1),Q1=[s1],e1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),T1=a("img",{src:"https://img-blog.csdnimg.cn/841c97c541484f908282be881ec32fd8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57-75rua55qE5bCPQOW8ug==,size_1,color_FFFFFF,t_70,g_se,x_16#pic_center",alt:"在这里插入图片描述"},null,-1),l1=a("p",null,"下面要开那三个盲盒操作，即短期行为学习，长期行为学习以及门控融合机制。但在这之前，得先说一个东西，就是输入层这里， 要带物品的 side infomation，比如物品的 item ID, 物品的品牌 ID，商铺 ID， 类别 ID 等等， 那你说，为啥要单独说呢？ 之前的模型不也有， 但是这里在利用方式上有些不一样需要注意。",-1),n1=a("h3",{id:"input-embedding-with-side-information",tabindex:"-1"},[t("Input Embedding with side Information "),a("a",{class:"header-anchor",href:"#input-embedding-with-side-information","aria-label":'Permalink to "Input Embedding with side Information"'},"​")],-1),o1=a("p",null,[t("在淘宝的推荐场景中，作者发现， 顾客与物品产生交互行为的时候，不仅考虑特定的商品本身，还考虑产品， 商铺，价格等，这个显然。所以，这里对于一个商品来说，不仅要用到 Item ID，还用了更多的 side info 信息，包括 "),a("code",null,"leat category, fist level category, brand,shop"),t(" 。")],-1),r1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"23.169ex",height:"2.366ex",role:"img",focusable:"false",viewBox:"0 -750 10240.6 1045.7","aria-hidden":"true"},m1=e("",1),d1=[m1],i1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"S")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"["),a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"m")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},"]")])])],-1),c1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.883ex",height:"2.151ex",role:"img",focusable:"false",viewBox:"0 -675.5 832.5 950.7","aria-hidden":"true"},g1=e("",1),u1=[g1],y1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"i"),a("mi",null,"t"),a("mi",null,"u")])])],-1),x1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.782ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.237ex",height:"2.714ex",role:"img",focusable:"false",viewBox:"0 -853.7 4524.6 1199.5","aria-hidden":"true"},_1=e("",1),E1=[_1],w1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mi",null,"t"),a("mi",null,"u")])])]),a("mo",null,"∈"),a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{mathvariant:"double-struck"},"R")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"d"),a("mo",null,"×"),a("mn",null,"1")])])])],-1),L1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.883ex",height:"2.151ex",role:"img",focusable:"false",viewBox:"0 -675.5 832.5 950.7","aria-hidden":"true"},b1=e("",1),D1=[b1],M1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"i"),a("mi",null,"t"),a("mi",null,"u")])])],-1),V1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},k1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.469ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.389ex",height:"4.07ex",role:"img",focusable:"false",viewBox:"0 -1149.5 12547.9 1799","aria-hidden":"true"},Z1=e("",1),j1=[Z1],A1=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mo",null,"="),a("mi",null,"concat"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"{"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")])]),a("mo",null,"∣"),a("mi",null,"f"),a("mo",null,"∈"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"F")]),a("mo",{"data-mjx-texclass":"CLOSE"},"}")]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),v1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.682ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.04ex",height:"2.938ex",role:"img",focusable:"false",viewBox:"0 -997.1 8857.6 1298.6","aria-hidden":"true"},R1=e("",1),O1=[R1],C1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")])]),a("mo",null,"="),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"x"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")])]),a("mo",null,"∈"),a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{mathvariant:"double-struck"},"R")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("msub",null,[a("mi",null,"d"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")])]),a("mo",null,"×"),a("mn",null,"1")])])])],-1),S1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.244ex",height:"2.237ex",role:"img",focusable:"false",viewBox:"0 -694 991.9 989","aria-hidden":"true"},X1=e("",1),N1=[X1],q1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msub",null,[a("mi",null,"d"),a("mi",null,"f")])])],-1),I1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},z1=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1),G1=[z1],J1=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"d")])],-1),W1=a("p",null,"另外就是用户的 base 表示向量了，这个很简单， 就是用户的基础画像，得到 embedding，直接也是 Concat，这个常规操作不解释：",-1),K1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},U1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"25.987ex",height:"2.273ex",role:"img",focusable:"false",viewBox:"0 -750 11486.3 1004.8","aria-hidden":"true"},$1=e("",1),Y1=[$1],a2=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mi",null,"concat"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"{"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"p")])]),a("mo",null,"∣"),a("mi",null,"p"),a("mo",null,"∈"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"P")]),a("mo",{"data-mjx-texclass":"CLOSE"},"}")]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),t2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.332ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.157ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -803.3 953.5 950","aria-hidden":"true"},Q2=e("",1),e2=[Q2],T2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"e"),a("mi",null,"u"),a("mi",null,"p")])])],-1),l2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.138ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 503 636","aria-hidden":"true"},o2=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D45D",d:"M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z",style:{"stroke-width":"3"}})])])],-1),r2=[o2],p2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"p")])],-1),m2=a("p",null,"Ok，输入这里说完了之后，就直接开盲盒， 不按照论文里面的顺序来了。想看更多细节的就去看原论文吧，感觉那里面说的有些啰嗦。不如直接上图解释来的明显：",-1),d2=a("p",null,[a("img",{src:"https://img-blog.csdnimg.cn/d297bf36d8c54b349dc666259b891927.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA57-75rua55qE5bCPQOW8ug==,size_2,color_FFFFFF,t_70,g_se,x_16#pic_center",alt:"在这里插入图片描述"}),t(" 这里正好三个框把盒子框住了，下面剖析出每个来就行啦。")],-1),i2=a("h3",{id:"短期用户行为建模",tabindex:"-1"},[t("短期用户行为建模 "),a("a",{class:"header-anchor",href:"#短期用户行为建模","aria-label":'Permalink to "短期用户行为建模"'},"​")],-1),c2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.815ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.473ex",height:"2.737ex",role:"img",focusable:"false",viewBox:"0 -849.5 5513.3 1209.7","aria-hidden":"true"},g2=e("",1),u2=[g2],y2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"["),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mo",{"data-mjx-texclass":"CLOSE"},"]")])])],-1),x2=a("p",null,"这个东西，首先要过 LSTM，学习序列信息，这个感觉不用多说，直接上公式：",-1),H2={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},_2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-7.579ex"},xmlns:"http://www.w3.org/2000/svg",width:"48.587ex",height:"16.288ex",role:"img",focusable:"false",viewBox:"0 -3849.7 21475.6 7199.5","aria-hidden":"true"},E2=e("",1),w2=[E2],L2=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[a("mtr",null,[a("mtd",null,[a("mi",{mathvariant:"bold-italic"},"i"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"n"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("mi",null,"σ"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mi",null,"n")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mo",null,"+"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mi",null,"n")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"2")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t"),a("mo",null,"−"),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msub",null,[a("mi",null,"b"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mi",null,"n")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])]),a("mtr",null,[a("mtd",null,[a("msubsup",null,[a("mi",null,"f"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("mi",null,"σ"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mo",null,"+"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"2")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t"),a("mo",null,"−"),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msub",null,[a("mi",null,"b"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])]),a("mtr",null,[a("mtd",null,[a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"o"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("mi",null,"σ"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"o")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"o")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"2")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t"),a("mo",null,"−"),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msub",null,[a("mi",null,"b"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"o")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])]),a("mtr",null,[a("mtd",null,[a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"c"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"f"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"c"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t"),a("mo",null,"−"),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("mi",{mathvariant:"bold-italic"},"i"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"n"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mi",null,"tanh"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"c")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("msubsup",null,[a("mi",null,"i"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mo",null,"+"),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"c")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"2")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t"),a("mo",null,"−"),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msub",null,[a("mi",null,"b"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"c")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])]),a("mtr",null,[a("mtd",null,[a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"o"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mi",null,"tanh"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"c"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])])])])],-1),f2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.406ex",height:"2.193ex",role:"img",focusable:"false",viewBox:"0 -694 1063.5 969.2","aria-hidden":"true"},D2=e("",1),M2=[D2],V2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"h"),a("mi",null,"t"),a("mi",null,"u")])])],-1),k2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.527ex",height:"2.366ex",role:"img",focusable:"false",viewBox:"0 -750 5094.9 1045.7","aria-hidden":"true"},j2=e("",1),A2=[j2],v2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"["),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},"]")])])],-1),F2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.245ex",height:"1.552ex",role:"img",focusable:"false",viewBox:"0 -686 1434.5 686","aria-hidden":"true"},O2=e("",1),C2=[O2],S2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mi",{mathvariant:"bold-italic"},"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),B2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.078ex",height:"2.554ex",role:"img",focusable:"false",viewBox:"0 -853.7 4454.4 1128.9","aria-hidden":"true"},N2=e("",1),q2=[N2],I2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"∈"),a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{mathvariant:"double-struck"},"R")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"d"),a("mo",null,"×"),a("mn",null,"1")])])])],-1),P2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.817ex",height:"1.441ex",role:"img",focusable:"false",viewBox:"0 -626 361 637","aria-hidden":"true"},G2=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})])])],-1),J2=[G2],W2=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"t")])],-1),K2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.679ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.406ex",height:"2.249ex",role:"img",focusable:"false",viewBox:"0 -694 1063.5 994","aria-hidden":"true"},$2=e("",1),Y2=[$2],a3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"h"),a("mi",null,"i"),a("mi",null,"u")])])],-1),t3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.679ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.406ex",height:"2.249ex",role:"img",focusable:"false",viewBox:"0 -694 1063.5 994","aria-hidden":"true"},Q3=e("",1),e3=[Q3],T3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"h"),a("mi",null,"i"),a("mi",null,"u")])])],-1),l3={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.469ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.399ex",height:"4.07ex",role:"img",focusable:"false",viewBox:"0 -1149.5 20950.2 1799","aria-hidden":"true"},o3=e("",1),r3=[o3],p3=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mtext",null," head "),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"}),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mi",null,"Attention"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"Q")])]),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"K")])]),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"V")])]),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),m3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.682ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.005ex",height:"2.919ex",role:"img",focusable:"false",viewBox:"0 -988.6 5748.2 1290.2","aria-hidden":"true"},i3=e("",1),c3=[i3],h3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"Q"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("msubsup",null,[a("mi",null,"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"Q")])]),a("msup",null,[a("mi",null,"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),g3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.679ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.6ex",height:"2.593ex",role:"img",focusable:"false",viewBox:"0 -846 6011.3 1145.9","aria-hidden":"true"},y3=e("",1),x3=[y3],H3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"K"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("msubsup",null,[a("mi",null,"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"K")])]),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),_3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.682ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.054ex",height:"2.61ex",role:"img",focusable:"false",viewBox:"0 -852.1 5770 1153.7","aria-hidden":"true"},w3=e("",1),L3=[w3],f3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"V"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("msubsup",null,[a("mi",null,"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"V")])]),a("msup",null,[a("mi",null,"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),b3={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.207ex"},xmlns:"http://www.w3.org/2000/svg",width:"42.323ex",height:"5.546ex",role:"img",focusable:"false",viewBox:"0 -1475.6 18706.7 2451.3","aria-hidden":"true"},M3=e("",1),V3=[M3],k3=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[a("mtr",null,[a("mtd"),a("mtd",null,[a("mi",null,"f"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",null,"Q"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("msubsup",null,[a("mi",null,"K"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")]),a("mo",null,"="),a("msubsup",null,[a("mi",null,"Q"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u"),a("mi",null,"T")])]),a("msubsup",null,[a("mi",null,"K"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])]),a("mtr",null,[a("mtd"),a("mtd",null,[a("msubsup",null,[a("mi",null,"A"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mi",null,"softmax"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("mi",null,"f"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",null,"Q"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("msubsup",null,[a("mi",null,"K"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])])]),a("mspace",{linebreak:"newline"}),a("msubsup",null,[a("mi",null,"head"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("msubsup",null,[a("mi",null,"V"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("msubsup",null,[a("mi",null,"A"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u"),a("mi",null,"T")])])])],-1),Z3=a("p",null,[t("这里如果有多头注意力基础的话非常好理解啊，不多解释，可以看我"),a("a",{href:"https://blog.csdn.net/wuzhongqiang/article/details/104414239?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164872966516781683952272%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=164872966516781683952272&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-104414239.nonecase&utm_term=Attention+is+all&spm=1018.2226.3001.4450",target:"_blank",rel:"noreferrer"},"这篇文章"),t("补一下。")],-1),j3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.303ex",height:"1.595ex",role:"img",focusable:"false",viewBox:"0 -694 576 705","aria-hidden":"true"},v3=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"210E",d:"M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z",style:{"stroke-width":"3"}})])])],-1),F3=[v3],R3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"h")])],-1),O3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.371ex",height:"1.595ex",role:"img",focusable:"false",viewBox:"0 -683 1048 705","aria-hidden":"true"},S3=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D44A",d:"M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z",style:{"stroke-width":"3"}})])])],-1),B3=[S3],X3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"W")])],-1),N3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.679ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.406ex",height:"2.249ex",role:"img",focusable:"false",viewBox:"0 -694 1063.5 994","aria-hidden":"true"},I3=e("",1),P3=[I3],z3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"h"),a("mi",null,"i"),a("mi",null,"u")])])],-1),G3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.798ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.308ex",height:"2.755ex",role:"img",focusable:"false",viewBox:"0 -864.9 3672.3 1217.7","aria-hidden":"true"},W3=e("",1),K3=[W3],U3=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msub",null,[a("mi",null,"d"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")])]),a("mo",null,"="),a("mfrac",null,[a("mn",null,"1"),a("mi",null,"h")]),a("mi",null,"d")])],-1),$3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.679ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.834ex",height:"2.249ex",role:"img",focusable:"false",viewBox:"0 -694 2578.5 994","aria-hidden":"true"},a4=e("",1),t4=[a4],s4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"h"),a("mi",null,"e"),a("mi",null,"a"),a("msubsup",null,[a("mi",null,"d"),a("mi",null,"i"),a("mi",null,"u")])])],-1),Q4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.198ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 971.4 851.8","aria-hidden":"true"},T4=e("",1),l4=[T4],n4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msub",null,[a("mi",null,"d"),a("mi",null,"k")])])],-1),o4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.303ex",height:"1.595ex",role:"img",focusable:"false",viewBox:"0 -694 576 705","aria-hidden":"true"},p4=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"210E",d:"M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z",style:{"stroke-width":"3"}})])])],-1),m4=[p4],d4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"h")])],-1),i4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},h4=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1),g4=[h4],u4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"d")])],-1),y4={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},x4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.6ex"},xmlns:"http://www.w3.org/2000/svg",width:"58.557ex",height:"2.978ex",role:"img",focusable:"false",viewBox:"0 -1051 25882.3 1316.2","aria-hidden":"true"},H4=e("",1),_4=[H4],E4=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mover",null,[a("mi",null,"X"),a("mo",{stretchy:"false"},"^")])]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mtext",null," MultiHead "),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msup",null,[a("mi",null,"X"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")]),a("mo",null,"="),a("msup",null,[a("mi",null,"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"O")])]),a("mtext",null," concat "),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mtext",null," head "),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msubsup",null,[a("mtext",null," head "),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"h")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1),w4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.679ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.406ex",height:"2.249ex",role:"img",focusable:"false",viewBox:"0 -694 1063.5 994","aria-hidden":"true"},f4=e("",1),b4=[f4],D4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"h"),a("mi",null,"i"),a("mi",null,"u")])])],-1),M4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.157ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 953.5 599.8","aria-hidden":"true"},k4=e("",1),Z4=[k4],j4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msub",null,[a("mi",null,"e"),a("mi",null,"u")])])],-1),A4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.146ex",height:"2.378ex",role:"img",focusable:"false",viewBox:"0 -1051 1390.7 1051","aria-hidden":"true"},F4=e("",1),R4=[F4],O4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mover",null,[a("mi",null,"X"),a("mo",{stretchy:"false"},"^")])]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),C4={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},S4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-7.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.946ex",height:"16.462ex",role:"img",focusable:"false",viewBox:"0 -3888.2 11026.1 7276.4","aria-hidden":"true"},B4=e("",1),X4=[B4],N4=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[a("mtr",null,[a("mtd",null,[a("msub",null,[a("mi",null,"α"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("mfrac",null,[a("mrow",null,[a("mi",null,"exp"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mover",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mo",{stretchy:"false"},"^")])]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u"),a("mi",null,"T")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])]),a("mrow",null,[a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")])]),a("mi",null,"exp"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mover",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mo",{stretchy:"false"},"^")])]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u"),a("mi",null,"T")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])])])]),a("mtr",null,[a("mtd",null,[a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"s"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")])]),a("msub",null,[a("mi",null,"α"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")])]),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mover",null,[a("mi",{mathvariant:"bold-italic"},"h"),a("mo",{stretchy:"false"},"^")])]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])])])])],-1),q4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.628ex",height:"2.554ex",role:"img",focusable:"false",viewBox:"0 -853.7 4255.4 1128.9","aria-hidden":"true"},P4=e("",1),z4=[P4],G4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"s"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"∈"),a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{mathvariant:"double-struck"},"R")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"d"),a("mo",null,"×"),a("mn",null,"1")])])])],-1),J4=a("h3",{id:"用户长期行为建模",tabindex:"-1"},[t("用户长期行为建模 "),a("a",{class:"header-anchor",href:"#用户长期行为建模","aria-label":'Permalink to "用户长期行为建模"'},"​")],-1),W4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.664ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -705 1177.5 727","aria-hidden":"true"},U4=e("",1),$4=[U4],Y4=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),a6={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},t6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.469ex"},xmlns:"http://www.w3.org/2000/svg",width:"19.135ex",height:"4.07ex",role:"img",focusable:"false",viewBox:"0 -1149.5 8457.6 1799","aria-hidden":"true"},s6=e("",1),Q6=[s6],e6=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"{"),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"∣"),a("mi",null,"f"),a("mo",null,"∈"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"F")]),a("mo",{"data-mjx-texclass":"CLOSE"},"}")])])],-1),T6=a("p",null,"这里面包含了各种 side 特征。这里就和短期行为那里不太一样了，长期行为这里，是从特征的维度进行聚合，也就是把用户的历史长序列分成了多个特征，比如用户历史点击过的商品，历史逛过的店铺，历史看过的商品的类别，品牌等，分成了多个特征子集，然后这每个特征子集里面有对应的 id，比如商品有商品 id, 店铺有店铺 id 等，对于每个子集，过 user Attention layer，和用户的 base 向量求 Attention， 相当于看看用户喜欢逛啥样的商店， 喜欢啥样的品牌，啥样的商品类别等等，得到每个子集最终的表示向量。每个子集的计算过程如下：",-1),l6={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-7.475ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.11ex",height:"16.082ex",role:"img",focusable:"false",viewBox:"0 -3804.1 10656.6 7108.2","aria-hidden":"true"},o6=e("",1),r6=[o6],p6=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[a("mtr",null,[a("mtd",null,[a("msub",null,[a("mi",null,"α"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("mfrac",null,[a("mrow",null,[a("mi",null,"exp"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"g"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u"),a("mi",null,"T")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])]),a("mrow",null,[a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"|"),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},"|")])])]),a("mi",null,"exp"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"g"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u"),a("mi",null,"T")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])])])]),a("mtr",null,[a("mtd",null,[a("msubsup",null,[a("mi",null,"z"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])]),a("mtd",null,[a("mi"),a("mo",null,"="),a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"|"),a("msubsup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},"|")])])]),a("msub",null,[a("mi",null,"α"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")])]),a("msubsup",null,[a("mi",{mathvariant:"bold-italic"},"g"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"k")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])])])])],-1),m6=a("p",null,"每个子集都会得到一个加权的向量，把这个东西拼起来，然后过 DNN。",-1),d6={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},i6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.94ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.605ex",height:"7.011ex",role:"img",focusable:"false",viewBox:"0 -1799.5 12201.3 3099","aria-hidden":"true"},c6=e("",1),h6=[c6],g6=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mtable",{displaystyle:"true",columnalign:"right left",columnspacing:"0em",rowspacing:"3pt"},[a("mtr",null,[a("mtd"),a("mtd",null,[a("msup",null,[a("mi",null,"z"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mi",null,"concat"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"{"),a("msubsup",null,[a("mi",null,"z"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"f")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"∣"),a("mi",null,"f"),a("mo",null,"∈"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"F")]),a("mo",{"data-mjx-texclass":"CLOSE"},"}")]),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])]),a("mtr",null,[a("mtd"),a("mtd",null,[a("msup",null,[a("mi",{mathvariant:"bold-italic"},"p"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mi",null,"tanh"),a("mo",{"data-mjx-texclass":"NONE"},"⁡"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"p")])]),a("msup",null,[a("mi",null,"z"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("mi",null,"b"),a("mo",{"data-mjx-texclass":"CLOSE"},")")])])])])])],-1),u6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.926ex",height:"2.37ex",role:"img",focusable:"false",viewBox:"0 -853.7 4387.4 1047.7","aria-hidden":"true"},x6=e("",1),H6=[x6],_6=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mi",{mathvariant:"bold-italic"},"p"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"∈"),a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{mathvariant:"double-struck"},"R")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"d"),a("mo",null,"×"),a("mn",null,"1")])])])],-1),E6=a("h3",{id:"短长期兴趣融合",tabindex:"-1"},[t("短长期兴趣融合 "),a("a",{class:"header-anchor",href:"#短长期兴趣融合","aria-label":'Permalink to "短长期兴趣融合"'},"​")],-1),w6=a("p",null,"长短期兴趣融合这里，作者发现之前模型往往喜欢直接拼接起来，或者加和，注意力加权等，但作者认为这样不能很好的将两类兴趣融合起来，因为长期序列里面，其实只有很少的一部分行为和当前有关。那么这样的话，直接无脑融合是有问题的。所以这里作者用了一种较为巧妙的方式，即门控机制：",-1),L6={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},f6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"73.025ex",height:"2.791ex",role:"img",focusable:"false",viewBox:"0 -883.9 32276.8 1233.4","aria-hidden":"true"},b6=e("",1),D6=[b6],M6=a("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("msubsup",null,[a("mi",null,"G"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mi",null,"sigmoid"),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"1")])]),a("msub",null,[a("mi",{mathvariant:"bold-italic"},"e"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"2")])]),a("msubsup",null,[a("mi",null,"s"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"W"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"3")])]),a("msup",null,[a("mi",{mathvariant:"bold-italic"},"p"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("mi",null,"b"),a("mo",{"data-mjx-texclass":"CLOSE"},")")]),a("mspace",{linebreak:"newline"}),a("msubsup",null,[a("mi",null,"o"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"="),a("mrow",{"data-mjx-texclass":"INNER"},[a("mo",{"data-mjx-texclass":"OPEN"},"("),a("mn",null,"1"),a("mo",null,"−"),a("msubsup",null,[a("mi",null,"G"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",{"data-mjx-texclass":"CLOSE"},")")]),a("mo",null,"⊙"),a("msup",null,[a("mi",null,"p"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"+"),a("msubsup",null,[a("mi",null,"G"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"⊙"),a("msubsup",null,[a("mi",null,"s"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])])])],-1),V6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.157ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 953.5 599.8","aria-hidden":"true"},Z6=e("",1),j6=[Z6],A6=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msub",null,[a("mi",null,"e"),a("mi",null,"u")])])],-1),v6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.164ex",height:"2.151ex",role:"img",focusable:"false",viewBox:"0 -675.5 956.5 950.7","aria-hidden":"true"},R6=e("",1),O6=[R6],C6=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"s"),a("mi",null,"t"),a("mi",null,"u")])])],-1),S6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.241ex",height:"1.967ex",role:"img",focusable:"false",viewBox:"0 -675.5 990.5 869.5","aria-hidden":"true"},X6=e("",1),N6=[X6],q6=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msup",null,[a("mi",null,"p"),a("mi",null,"u")])])],-1),I6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.623ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.345ex",height:"2.554ex",role:"img",focusable:"false",viewBox:"0 -853.7 4572.4 1128.9","aria-hidden":"true"},z6=e("",1),G6=[z6],J6=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("msubsup",null,[a("mi",null,"G"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"t")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"u")])]),a("mo",null,"∈"),a("msup",null,[a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",{mathvariant:"double-struck"},"R")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"d"),a("mo",null,"×"),a("mn",null,"1")])])])],-1),W6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.817ex",height:"1.441ex",role:"img",focusable:"false",viewBox:"0 -626 361 637","aria-hidden":"true"},U6=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})])])],-1),$6=[U6],Y6=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"t")])],-1),a5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},s5=a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1),Q5=[s5],e5=a("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"d")])],-1),T5=e("",27);function l5(n5,o5,r5,p5,m5,d5){return s(),Q("div",null,[n,a("p",null,[a("mjx-container",o,[(s(),Q("svg",r,m)),d]),t(" 表示用户集合，"),a("mjx-container",i,[(s(),Q("svg",c,g)),u]),t(" 表示 item 集合，模型考虑在时间"),a("mjx-container",y,[(s(),Q("svg",x,_)),E]),t("，是否用户"),a("mjx-container",w,[(s(),Q("svg",L,b)),D]),t(" 会对"),a("mjx-container",M,[(s(),Q("svg",V,Z)),j]),t(" 产生交互。 对于"),a("mjx-container",A,[(s(),Q("svg",v,R)),O]),t("， 我们能够得到它的历史行为序列，那么先说一下如何进行会话的划分， 这里有三个规则：")]),C,a("p",null,[t("这样划分开会话之后， 对于用户"),a("mjx-container",S,[(s(),Q("svg",B,N)),q]),t(" 的短期行为定义是离目前最近的这次会话， 用"),a("mjx-container",I,[(s(),Q("svg",P,G)),J]),t(" 表示，"),a("mjx-container",W,[(s(),Q("svg",K,$)),Y]),t(" 是序列长度。 而长期的用户行为是过去一周内的会话，但不包括短期的这次会话， 这个用"),a("mjx-container",a1,[(s(),Q("svg",t1,Q1)),e1]),t(" 表示。网络推荐架构如下： "),T1,t(" 这个感觉并不用过多解释。看过召回的应该都能懂， 接收了用户的短期行为和长期行为，然后分别通过两个盲盒得到表示向量，再通过门控融合就得到了最终的用户表示。")]),l1,n1,o1,a("p",null,[t("所以，假设用户的短期行为是"),a("mjx-container",r1,[(s(),Q("svg",p1,d1)),i1]),t("， 这里面的每个商品"),a("mjx-container",c1,[(s(),Q("svg",h1,u1)),y1]),t(" 其实有 5 个属性表示了，每个属性本质是 ID，但转成 embedding 之后，就得到了 5 个 embedding， 所以这里就涉及到了融合问题。 这里用"),a("mjx-container",x1,[(s(),Q("svg",H1,E1)),w1]),t(" 来表示每个"),a("mjx-container",L1,[(s(),Q("svg",f1,D1)),M1]),t("，但这里不是 embedding 的 pooling 操作，而是 Concat")]),a("mjx-container",V1,[(s(),Q("svg",k1,j1)),A1]),a("p",null,[t("其中，"),a("mjx-container",v1,[(s(),Q("svg",F1,O1)),C1]),t("， 这个公式看着负责，其实就是每个 side info 的 id 过 embedding layer 得到各自的 embedding。这里 embedding 的维度是"),a("mjx-container",S1,[(s(),Q("svg",B1,N1)),q1]),t("， 等拼接起来之后，就是"),a("mjx-container",I1,[(s(),Q("svg",P1,G1)),J1]),t(" 维了。这个点要注意。")]),W1,a("mjx-container",K1,[(s(),Q("svg",U1,Y1)),a2]),a("p",null,[a("mjx-container",t2,[(s(),Q("svg",s2,e2)),T2]),t(" 是特征"),a("mjx-container",l2,[(s(),Q("svg",n2,r2)),p2]),t(" 的 embedding。")]),m2,d2,i2,a("p",null,[t("这里短期用户行为是下面的那个框， 接收的输入，首先是用户最近的那次会话，里面各个商品加入了 side info 信息之后，有了最终的 embedding 表示"),a("mjx-container",c2,[(s(),Q("svg",h2,u2)),y2]),t("。")]),x2,a("mjx-container",H2,[(s(),Q("svg",_2,w2)),L2]),a("p",null,[t("这里采用的是多输入多输出， 即每个时间步都会有一个隐藏状态"),a("mjx-container",f2,[(s(),Q("svg",b2,M2)),V2]),t(" 输出出来，那么经过 LSTM 之后，原始的序列就有了序列相关信息，得到了"),a("mjx-container",k2,[(s(),Q("svg",Z2,A2)),v2]),t(", 把这个记为"),a("mjx-container",F2,[(s(),Q("svg",R2,C2)),S2]),t("。这里的"),a("mjx-container",B2,[(s(),Q("svg",X2,q2)),I2]),t(" 表示时间"),a("mjx-container",P2,[(s(),Q("svg",z2,J2)),W2]),t(" 的序列偏好表示。")]),a("p",null,[t("接下来， 这个东西要过 Multi-head self-attention 层，这个东西的原理我这里就不多讲了，这个东西可以学习到"),a("mjx-container",K2,[(s(),Q("svg",U2,Y2)),a3]),t(" 系列之间的相关性，这个操作从某种角度看，也很像聚类， 因为我们这里是先用多头矩阵把"),a("mjx-container",t3,[(s(),Q("svg",s3,e3)),T3]),t(" 系列映射到多个空间，然后从各个空间中互求相关性")]),a("mjx-container",l3,[(s(),Q("svg",n3,r3)),p3]),a("p",null,[t("得到权重后，对原始的向量加权融合。 让"),a("mjx-container",m3,[(s(),Q("svg",d3,c3)),h3]),t("， "),a("mjx-container",g3,[(s(),Q("svg",u3,x3)),H3]),t("，"),a("mjx-container",_3,[(s(),Q("svg",E3,L3)),f3]),t("， 背后计算是：")]),a("mjx-container",b3,[(s(),Q("svg",D3,V3)),k3]),Z3,a("p",null,[t("这是一个头的计算， 接下来每个头都这么算，假设有"),a("mjx-container",j3,[(s(),Q("svg",A3,F3)),R3]),t(" 个头，这里会通过上面的映射矩阵"),a("mjx-container",O3,[(s(),Q("svg",C3,B3)),X3]),t(" 系列，先把原始的"),a("mjx-container",N3,[(s(),Q("svg",q3,P3)),z3]),t(" 向量映射到"),a("mjx-container",G3,[(s(),Q("svg",J3,K3)),U3]),t(" 维度，然后计算"),a("mjx-container",$3,[(s(),Q("svg",Y3,t4)),s4]),t(" 也是"),a("mjx-container",Q4,[(s(),Q("svg",e4,l4)),n4]),t(" 维，这样"),a("mjx-container",o4,[(s(),Q("svg",r4,m4)),d4]),t(" 个 head 进行拼接，正好是"),a("mjx-container",i4,[(s(),Q("svg",c4,g4)),u4]),t(" 维， 接下来过一个全连接或者线性映射得到 MultiHead 的输出。")]),a("mjx-container",y4,[(s(),Q("svg",x4,_4)),E4]),a("p",null,[t("这样就相当于更相似的"),a("mjx-container",w4,[(s(),Q("svg",L4,b4)),D4]),t(" 融合到了一块，而这个更相似又是从多个角度得到的，于是乎， 作者认为，这样就能学习到用户的多兴趣。")]),a("p",null,[t("得到这个东西之后，接下来再过一个 User Attention， 因为作者发现，对于相似历史行为的不同用户，其兴趣偏好也不太一样。 所以加入这个用户 Attention 层，想挖掘更细粒度的用户个性化信息。 当然，这个就是普通的 embedding 层了， 用户的 base 向量"),a("mjx-container",M4,[(s(),Q("svg",V4,Z4)),j4]),t(" 作为 query，与"),a("mjx-container",A4,[(s(),Q("svg",v4,R4)),O4]),t(" 的每个向量做 Attention，然后加权求和得最终向量：")]),a("mjx-container",C4,[(s(),Q("svg",S4,X4)),N4]),a("p",null,[t("其中"),a("mjx-container",q4,[(s(),Q("svg",I4,z4)),G4]),t("，这样短期行为兴趣就修成了正果。")]),J4,a("p",null,[t("从长期的视角来看，用户在不同的维度上可能积累了广泛的兴趣，用户可能经常访问一组类似的商店，并反复购买属于同一类别的商品。 所以长期行为"),a("mjx-container",W4,[(s(),Q("svg",K4,$4)),Y4]),t(" 来自于不同的特征尺度。")]),a("mjx-container",a6,[(s(),Q("svg",t6,Q6)),e6]),T6,a("mjx-container",l6,[(s(),Q("svg",n6,r6)),p6]),m6,a("mjx-container",d6,[(s(),Q("svg",i6,h6)),g6]),a("p",null,[t("这里的"),a("mjx-container",u6,[(s(),Q("svg",y6,H6)),_6]),t("， 这样就得到了用户的长期兴趣表示。")]),E6,w6,a("mjx-container",L6,[(s(),Q("svg",f6,D6)),M6]),a("p",null,[t("这个和 LSTM 的这种门控机制很像，首先门控接收的输入有用户画像"),a("mjx-container",V6,[(s(),Q("svg",k6,j6)),A6]),t("，用户短期兴趣"),a("mjx-container",v6,[(s(),Q("svg",F6,O6)),C6]),t("， 用户长期兴趣"),a("mjx-container",S6,[(s(),Q("svg",B6,N6)),q6]),t("，经过 sigmoid 函数得到了"),a("mjx-container",I6,[(s(),Q("svg",P6,G6)),J6]),t("，用来决定在"),a("mjx-container",W6,[(s(),Q("svg",K6,$6)),Y6]),t(" 时刻短期和长期兴趣的贡献程度。然后根据这个贡献程度对短期和长期偏好加权进行融合。")]),a("p",null,[t("为啥这东西就有用了呢？ 实验中证明了这个东西有用，但这里给出我的理解哈，我们知道最终得到的短期或者长期兴趣都是"),a("mjx-container",a5,[(s(),Q("svg",t5,Q5)),e5]),t(" 维的向量， 每一个维度可能代表着不同的兴趣偏好，比如第一维度代表品牌，第二个维度代表类别，第三个维度代表价格，第四个维度代表商店等等，当然假设哈，真实的向量不可解释。")]),T5])}const h5=T(l,[["render",l5]]);export{c5 as __pageData,h5 as default};
