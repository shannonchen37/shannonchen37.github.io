import{_ as s,o as n,c as a,U as p}from"./chunks/framework.489e5108.js";const h=JSON.parse('{"title":"C 的历史问题：undefined behavior","description":"","frontmatter":{},"headers":[],"relativePath":"3.编程思维体系构建/3.4.7.2C的历史问题：undefined behavior.md","filePath":"3.编程思维体系构建/3.4.7.2C的历史问题：undefined behavior.md","lastUpdated":1696176798000}'),l={name:"3.编程思维体系构建/3.4.7.2C的历史问题：undefined behavior.md"},o=p(`<h1 id="c-的历史问题-undefined-behavior" tabindex="-1">C 的历史问题：undefined behavior <a class="header-anchor" href="#c-的历史问题-undefined-behavior" aria-label="Permalink to &quot;C 的历史问题：undefined behavior&quot;">​</a></h1><p><img src="https://cdn.xyxsw.site/boxcnIdOChXQUGMvnxWcB7uTWLh.png" alt=""></p><p>简写为 UB</p><p>“Anything at all can happens; the Standard imposes no requirements. The program may fail to compile, or it may execute incorrectly (either crashing or silently generating incorrect results), or it may fortuitously do exactly what the programmer intended”</p><p>简单来说就是：他没定义这种操作该怎么办。</p><p>比如说 / 0 以及一些你们可能没接触过的操作。</p><p>给你们看个恶心的例子：</p><div class="language-c vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">argc</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">**</span><span style="color:#FFAB70;">argv</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> r </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (i</span><span style="color:#F97583;">++*++</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">--*--</span><span style="color:#E1E4E8;">i);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;The answer : </span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">n&quot;</span><span style="color:#E1E4E8;">, r);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">system</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;pause&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#E36209;">argc</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">**</span><span style="color:#E36209;">argv</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> r </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (i</span><span style="color:#D73A49;">++*++</span><span style="color:#24292E;">i</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">i</span><span style="color:#D73A49;">--*--</span><span style="color:#24292E;">i);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;The answer : </span><span style="color:#005CC5;">%d</span><span style="color:#032F62;">n&quot;</span><span style="color:#24292E;">, r);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">system</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;pause&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>让我们看看不同编译器的 Debug 模式下执行的结果</p><p>Visual C++ 6.0</p><blockquote><p>The answer : 25</p></blockquote><p>Visual C++ 2008 Express</p><blockquote><p>The answer : 18</p></blockquote><p>MinGW(GCC)</p><blockquote><p>The answer : 25</p></blockquote><p>我们试试看在 Release 下执行的结果</p><p>Visual C++ 6.0</p><blockquote><p>The answer : 18</p></blockquote><p>Visual C++ 2008 Express</p><blockquote><p>The answer : 18</p></blockquote><p>MinGW(GCC)</p><blockquote><p>The answer : 25</p></blockquote><p>C 语言最初为了开发 UNIX 和系统软体而生，本质是低阶的程式语言</p><p>在语言规范层级存在 UB，可允许编译器引入更多最佳化。比方说 <code>X * 2 / 2</code> 在沒有 overflow 发生的時候，可最佳化为 <code>X</code> 。</p><p>而且值得注意的是，在你的程序初始化之前，栈里面塞的一堆东西也是 UB。</p><p>但是高级语言比如说 java，python 都不会出现这样的问题了。</p><p>因为发现少一个时钟周期的运算多一堆问题，完全得不偿失啊。</p><p>当然，有更多兴趣的话可以看看这个东西</p><p><a href="https://blog.ez2learn.com/2008/09/27/evil-undefined-behavior/" target="_blank" rel="noreferrer">万恶的未定义行为 | 程式设计 遇上 小提琴</a></p><p><del>关键是，老师喜欢出题刁难你啊！真烦啊！</del></p>`,30),e=[o];function r(t,c,i,E,y,d){return n(),a("div",null,e)}const b=s(l,[["render",r]]);export{h as __pageData,b as default};
