import{_ as s,o as n,c as e,U as a}from"./chunks/framework.489e5108.js";const B=JSON.parse('{"title":"子网与无类域间路由","description":"","frontmatter":{},"headers":[],"relativePath":"9.计算机网络/9.2.3.2子网与无类域间路由.md","filePath":"9.计算机网络/9.2.3.2子网与无类域间路由.md","lastUpdated":1696176798000}'),l={name:"9.计算机网络/9.2.3.2子网与无类域间路由.md"},t=a(`<h1 id="子网与无类域间路由" tabindex="-1">子网与无类域间路由 <a class="header-anchor" href="#子网与无类域间路由" aria-label="Permalink to &quot;子网与无类域间路由&quot;">​</a></h1><p>在上一篇文章中，我们详细讲解了 IP 数据包的结构。一个 IP 数据包确实非常复杂，但现在请你忘掉他，仅在需要的时候翻看相关文章做参考。</p><p>你只需要知道一件事 —— IP 头里有一对 IP 地址，分别分别代表这个数据包从哪里来，到哪里去。</p><p>在组成一个比较大的网络前，我们需要给一个个孤立的 IP 地址分类。给 IP 分类可以让维护路由表变得更简单，CIDR（无类域间路由）是一种非常良好的分类方法。</p><h2 id="cidr" tabindex="-1">CIDR <a class="header-anchor" href="#cidr" aria-label="Permalink to &quot;CIDR&quot;">​</a></h2><p>我们先看看什么地方会出现 CIDR 这个东西。如果你正在使用 Linux 操作系统，你可以输入命令 <code>ip addr</code> ，他会打印出一串大概这样的内容</p><blockquote><p>windows 的 CIDR 采用点分十进制掩码，后续介绍</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">baimeow@server:~$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span></span>
<span class="line"><span style="color:#B392F0;">1:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lo:</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">LOOPBACK,UP,LOWER_U</span><span style="color:#E1E4E8;">P</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mtu</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">65536</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">qdisc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">noqueue</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">UNKNOWN</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">qlen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">link/loopback</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">00</span><span style="color:#9ECBFF;">:00:00:00:00:00</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">brd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">00</span><span style="color:#9ECBFF;">:00:00:00:00:00</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">inet</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">127.0</span><span style="color:#9ECBFF;">.0.1/8</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scope</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lo</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">valid_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forever</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preferred_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forever</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">inet6</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">::1/128</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scope</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">valid_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forever</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preferred_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forever</span></span>
<span class="line"><span style="color:#B392F0;">2:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0:</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">BROADCAST,MULTICAST,UP,LOWER_U</span><span style="color:#E1E4E8;">P</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mtu</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1500</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">qdisc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fq_codel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">UP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">qlen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">link/ether</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bf:17:21:ab:44:ba</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">brd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ff:ff:ff:ff:ff:ff</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">inet</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.1.12/24</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">metric</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">brd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.1.255</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scope</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">global</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dynamic</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens18</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">valid_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2458</span><span style="color:#9ECBFF;">sec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preferred_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2458</span><span style="color:#9ECBFF;">sec</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">inet6</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fe80::bc57:71ff:febb:24b0/64</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scope</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">valid_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forever</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preferred_lft</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">forever</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">baimeow@server:~$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">addr</span></span>
<span class="line"><span style="color:#6F42C1;">1:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lo:</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">LOOPBACK,UP,LOWER_U</span><span style="color:#24292E;">P</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mtu</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">65536</span><span style="color:#24292E;"> </span><span style="color:#032F62;">qdisc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">noqueue</span><span style="color:#24292E;"> </span><span style="color:#032F62;">state</span><span style="color:#24292E;"> </span><span style="color:#032F62;">UNKNOWN</span><span style="color:#24292E;"> </span><span style="color:#032F62;">group</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">qlen</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">link/loopback</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">00</span><span style="color:#032F62;">:00:00:00:00:00</span><span style="color:#24292E;"> </span><span style="color:#032F62;">brd</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">00</span><span style="color:#032F62;">:00:00:00:00:00</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">inet</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">127.0</span><span style="color:#032F62;">.0.1/8</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scope</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lo</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">valid_lft</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forever</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preferred_lft</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forever</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">inet6</span><span style="color:#24292E;"> </span><span style="color:#032F62;">::1/128</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scope</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">valid_lft</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forever</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preferred_lft</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forever</span></span>
<span class="line"><span style="color:#6F42C1;">2:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">eth0:</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">BROADCAST,MULTICAST,UP,LOWER_U</span><span style="color:#24292E;">P</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mtu</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1500</span><span style="color:#24292E;"> </span><span style="color:#032F62;">qdisc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fq_codel</span><span style="color:#24292E;"> </span><span style="color:#032F62;">state</span><span style="color:#24292E;"> </span><span style="color:#032F62;">UP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">group</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">qlen</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">link/ether</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bf:17:21:ab:44:ba</span><span style="color:#24292E;"> </span><span style="color:#032F62;">brd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ff:ff:ff:ff:ff:ff</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">inet</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.1.12/24</span><span style="color:#24292E;"> </span><span style="color:#032F62;">metric</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;"> </span><span style="color:#032F62;">brd</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.1.255</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scope</span><span style="color:#24292E;"> </span><span style="color:#032F62;">global</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dynamic</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens18</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">valid_lft</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2458</span><span style="color:#032F62;">sec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preferred_lft</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2458</span><span style="color:#032F62;">sec</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">inet6</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fe80::bc57:71ff:febb:24b0/64</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scope</span><span style="color:#24292E;"> </span><span style="color:#032F62;">link</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">valid_lft</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forever</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preferred_lft</span><span style="color:#24292E;"> </span><span style="color:#032F62;">forever</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>其中有 4 个 CIDR，分别是 <code>127.0.0.1/8</code> <code>::1/128</code> <code>192.168.1.12/24</code> <code>fe80::bc57:71ff:febb:24b0/64</code> 我们以 <code>192.168.1.12/24</code> 为例。</p><p>他由一个 IP 地址和一个数字组成，中间用正斜杠分割，IP 地址就是你的设备的 IP，这没有什么特别特殊的。而后面的这个 24 是掩码。这其实表达了很多层意思：</p><ul><li><p>设备 IP 是 <code>192.168.1.12</code></p></li><li><p>网络号是 <code>192.168.1.0</code></p></li><li><p>掩码是 24</p></li><li><p>广播地址是 <code>192.168.1.255</code></p></li><li><p>这个 IP 所在的子网拥有的范围的是 <code>192.168.1.0</code> - <code>192.168.1.255</code></p></li><li><p>这个 IP 所在的子网可以分配的 IP 范围的是 <code>192.168.1.1</code> - <code>192.168.1.254</code></p></li></ul><p>为了理解上面这些东西都是怎么来的，我们需要理解这个掩码是如何作用在 IP 上的，我们先把 IP 地址写成二进制的格式（点分二进制）</p><p><code>192.168.1.12</code> -&gt; <code>11000000.10101000.00000001.00001100</code></p><p>目前，我们的这个掩码值为 24，他的意思是把 IP 地址分成，前 24 位，剩下的 8 位，这两部分，被切除的部分用 0 来填充，于是我们得到了</p><ul><li><p>网络号 <code>11000000.10101000.00000001.00000000</code> -&gt; <code>192.168.1.0</code></p></li><li><p>主机号 <code>00000000.00000000.00000000.00001100</code> -&gt; <code>0.0.0.12</code></p></li></ul><p>这里由于 /24 刚刚好切到了点上，所以就被非常直观地分成了这样两部分。</p><p>在 CIDR 的规则中，将拥有同样的网络号和同样的掩码的 IP 的集合作为一个子网。比如网络号为 <code>192.168.1.0</code> ，掩码为 24 的所有 IP 就是 <code>192.168.1.0</code> - <code>192.168.1.255</code> 这些个 IP，他们都在 <code>192.168.1.0/24</code> 这个子网里。</p><p>注意，“子网” 并不是一个非常抽象或者特殊的概念，他只是从互联网这张大网里取了一段 IP 地址构成子网，就像集合的子集一样。只是我们现在正在使用 CIDR 的规则去划分子网，遵循着 CIDR 的规则用一个网络号和掩码去划分出这样一段 IP。</p><p>在这样的一个子网里，我们定义：</p><ul><li>第一个地址是网络地址</li><li>最后一个地址是广播地址</li><li>剩下的地址可以分配给网络内的设备</li></ul><p>以上定义是默认行为，其实是可以修改的，比如广播地址就可以不是最后一个地址。</p><p>严格意义上说，上面提到的子网一部分应该改称呼为网段，简单起见不细究了。</p><h2 id="常见保留ip" tabindex="-1">常见保留 IP <a class="header-anchor" href="#常见保留ip" aria-label="Permalink to &quot;常见保留IP&quot;">​</a></h2><p>了解一下常见的保留 IP 吧，这些保留 IP 不会出现在公网，而是被用于其他特殊用途。</p><p>让我抄一下 Wiki 的表格。</p><table><thead><tr><th style="text-align:center;">地址块 (<a href="https://zh.wikipedia.org/wiki/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1" target="_blank" rel="noreferrer">CIDR</a>)</th><th style="text-align:center;">范围</th><th style="text-align:center;">地址数</th><th style="text-align:center;">效用域</th><th style="text-align:center;">用途</th></tr></thead><tbody><tr><td style="text-align:center;">0.0.0.0/8</td><td style="text-align:center;">0.0.0.0 – 0.255.255.255</td><td style="text-align:center;">16,777,216</td><td style="text-align:center;">软件</td><td style="text-align:center;">用于广播信息到当前主机。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-1" target="_blank" rel="noreferrer">1]</a></td></tr><tr><td style="text-align:center;">10.0.0.0/8</td><td style="text-align:center;">10.0.0.0 – 10.255.255.255</td><td style="text-align:center;">16,777,216</td><td style="text-align:center;">专用网络</td><td style="text-align:center;">用于<a href="https://zh.wikipedia.org/wiki/%E4%B8%93%E7%94%A8%E7%BD%91%E7%BB%9C" target="_blank" rel="noreferrer">专用网络</a>中的本地通信。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc1918-2" target="_blank" rel="noreferrer">2]</a></td></tr><tr><td style="text-align:center;">100.64.0.0/10</td><td style="text-align:center;">100.64.0.0 – 100.127.255.255</td><td style="text-align:center;">4,194,304</td><td style="text-align:center;">专用网络</td><td style="text-align:center;">用于在<a href="https://zh.wikipedia.org/wiki/%E7%94%B5%E4%BF%A1%E7%BA%A7NAT" target="_blank" rel="noreferrer">电信级 NAT</a> 环境中服务提供商与其用户通信。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-3" target="_blank" rel="noreferrer">3]</a></td></tr><tr><td style="text-align:center;">127.0.0.0/8</td><td style="text-align:center;">127.0.0.0 – 127.255.255.255</td><td style="text-align:center;">16,777,216</td><td style="text-align:center;">主机</td><td style="text-align:center;">用于到本地主机的<a href="https://zh.wikipedia.org/wiki/IPv4#%E7%8E%AF%E5%9B%9E%E5%9C%B0%E5%9D%80%EF%BC%88Loopback_Address%EF%BC%89" target="_blank" rel="noreferrer">环回地址</a>。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-4" target="_blank" rel="noreferrer">4]</a></td></tr><tr><td style="text-align:center;">169.254.0.0/16</td><td style="text-align:center;">169.254.0.0 – 169.254.255.255</td><td style="text-align:center;">65,536</td><td style="text-align:center;">链路</td><td style="text-align:center;">用于单链路的两个主机之间的<a href="https://zh.wikipedia.org/wiki/%E9%93%BE%E8%B7%AF%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80" target="_blank" rel="noreferrer">链路本地地址</a>，而没有另外指定 IP 地址，例如通常从<a href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E8%AE%BE%E7%BD%AE%E5%8D%8F%E8%AE%AE" target="_blank" rel="noreferrer"> DHCP</a> 服务器所检索到的 IP 地址。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-5" target="_blank" rel="noreferrer">5]</a></td></tr><tr><td style="text-align:center;">172.16.0.0/12</td><td style="text-align:center;">172.16.0.0 – 172.31.255.255</td><td style="text-align:center;">1,048,576</td><td style="text-align:center;">专用网络</td><td style="text-align:center;">用于<a href="https://zh.wikipedia.org/wiki/%E4%B8%93%E7%94%A8%E7%BD%91%E7%BB%9C" target="_blank" rel="noreferrer">专用网络</a>中的本地通信。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc1918-2" target="_blank" rel="noreferrer">2]</a></td></tr><tr><td style="text-align:center;">192.0.0.0/24</td><td style="text-align:center;">192.0.0.0 – 192.0.0.255</td><td style="text-align:center;">256</td><td style="text-align:center;">专用网络</td><td style="text-align:center;">用于 IANA 的 IPv4 特殊用途地址表。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc5736-6" target="_blank" rel="noreferrer">6]</a></td></tr><tr><td style="text-align:center;">192.0.2.0/24</td><td style="text-align:center;">192.0.2.0 – 192.0.2.255</td><td style="text-align:center;">256</td><td style="text-align:center;">文档</td><td style="text-align:center;">分配为用于文档和示例中的 “TEST-NET”（测试网），它不应该被公开使用。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc5737-7" target="_blank" rel="noreferrer">7]</a></td></tr><tr><td style="text-align:center;">192.88.99.0/24</td><td style="text-align:center;">192.88.99.0 – 192.88.99.255</td><td style="text-align:center;">256</td><td style="text-align:center;">互联网</td><td style="text-align:center;">用于<a href="https://zh.wikipedia.org/wiki/6to4" target="_blank" rel="noreferrer"> 6to4</a><a href="https://zh.wikipedia.org/wiki/%E4%BB%BB%E6%92%AD" target="_blank" rel="noreferrer"> 任播</a>中继。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-8" target="_blank" rel="noreferrer">8]</a>（已废弃 [<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc7526-9" target="_blank" rel="noreferrer">9]</a>）</td></tr><tr><td style="text-align:center;">192.168.0.0/16</td><td style="text-align:center;">192.168.0.0 – 192.168.255.255</td><td style="text-align:center;">65,536</td><td style="text-align:center;">专用网络</td><td style="text-align:center;">用于<a href="https://zh.wikipedia.org/wiki/%E4%B8%93%E7%94%A8%E7%BD%91%E7%BB%9C" target="_blank" rel="noreferrer">专用网络</a>中的本地通信。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc1918-2" target="_blank" rel="noreferrer">2]</a></td></tr><tr><td style="text-align:center;">198.18.0.0/15</td><td style="text-align:center;">198.18.0.0 – 198.19.255.255</td><td style="text-align:center;">131,072</td><td style="text-align:center;">专用网络</td><td style="text-align:center;">用于测试两个不同的子网的网间通信。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-10" target="_blank" rel="noreferrer">10]</a></td></tr><tr><td style="text-align:center;">198.51.100.0/24</td><td style="text-align:center;">198.51.100.0 – 198.51.100.255</td><td style="text-align:center;">256</td><td style="text-align:center;">文档</td><td style="text-align:center;">分配为用于文档和示例中的 “TEST-NET-2”（测试 - 网 - 2），它不应该被公开使用。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc5737-7" target="_blank" rel="noreferrer">7]</a></td></tr><tr><td style="text-align:center;">203.0.113.0/24</td><td style="text-align:center;">203.0.113.0 – 203.0.113.255</td><td style="text-align:center;">256</td><td style="text-align:center;">文档</td><td style="text-align:center;">分配为用于文档和示例中的 “TEST-NET-3”（测试 - 网 - 3），它不应该被公开使用。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc5737-7" target="_blank" rel="noreferrer">7]</a></td></tr><tr><td style="text-align:center;">224.0.0.0/4</td><td style="text-align:center;">224.0.0.0 – 239.255.255.255</td><td style="text-align:center;">268,435,456</td><td style="text-align:center;">互联网</td><td style="text-align:center;">用于多播。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc1112-11" target="_blank" rel="noreferrer">11]</a></td></tr><tr><td style="text-align:center;">233.252.0.0/24</td><td style="text-align:center;">233.252.0.0 - 233.252.0.255</td><td style="text-align:center;">256</td><td style="text-align:center;">文档</td><td style="text-align:center;">分配为用于文档和示例中的 “MCAST-TEST-NET”，它不应该被公开使用</td></tr><tr><td style="text-align:center;">240.0.0.0/4</td><td style="text-align:center;">240.0.0.0 – 255.255.255.254</td><td style="text-align:center;">268,435,455</td><td style="text-align:center;">互联网</td><td style="text-align:center;">用于将来使用。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc6890-12" target="_blank" rel="noreferrer">12]</a></td></tr><tr><td style="text-align:center;">255.255.255.255/32</td><td style="text-align:center;">255.255.255.255</td><td style="text-align:center;">1</td><td style="text-align:center;">子网</td><td style="text-align:center;">用于受限广播地址。[<a href="https://zh.wikipedia.org/wiki/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80#cite_note-rfc6890-12" target="_blank" rel="noreferrer">12]</a></td></tr></tbody></table><p>如果需要搭建自己的比如说家庭网络，寝室网络，一般会选择</p><ul><li><code>10.0.0.0/8</code></li><li><code>192.168.0.0/16</code></li><li><code>172.16.0.0/12</code></li></ul><p>此外另外了解一下其他的特殊地址，避免冲突吧</p><ul><li><code>169.254.0.0/16</code> DHCP 获取到 IP 前的临时 IP 地址</li><li><code>192.18.0.0/16</code> 一些代理软件的透明代理模式会解析域名到这里</li><li><code>172.17.0.0/16</code> Docker 默认网段</li></ul><h2 id="旧闻一则-——-abcde-类-ip" tabindex="-1">旧闻一则 —— ABCDE 类 IP <a class="header-anchor" href="#旧闻一则-——-abcde-类-ip" aria-label="Permalink to &quot;旧闻一则 —— ABCDE 类 IP&quot;">​</a></h2><p>很久很久以前，一群自大的人给 IP 随意地划分了 ABCDE 类。很遗憾，我们仍需要了解一下这个历史包袱。</p><ul><li><p>A 类 0.0.0.0~126.255.255.255 大型网络</p></li><li><p>B 类 128.0.0.0~191.255.255.255 中型网络</p></li><li><p>C 类 192.0.0.0~223.255.255.255 小型网络</p></li><li><p>D 类 224.0.0.1-239.255.255.254 多播</p></li><li><p>E 类 240.0.0.0---255.255.255.255 保留段与广播地址</p></li></ul><p>仅作了解，现今已经不具有实际意义了</p><h2 id="正在消失的-——-点分10进制掩码" tabindex="-1">正在消失的 —— 点分 10 进制掩码 <a class="header-anchor" href="#正在消失的-——-点分10进制掩码" aria-label="Permalink to &quot;正在消失的 —— 点分10进制掩码&quot;">​</a></h2><p>当你在 windows 的 cmd 里执行 <code>ipconfig /all</code> 时，你可以看到一个点分十进制的掩码。</p><div class="language-cmd vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">无线局域网适配器 WLAN:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   连接特定的 DNS 后缀 . . . . . . . :</span></span>
<span class="line"><span style="color:#E1E4E8;">   描述. . . . . . . . . . . . . . . : </span><span style="color:#B392F0;">Intel</span><span style="color:#E1E4E8;">(R) Wi</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Fi </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> AX200 160MHz</span></span>
<span class="line"><span style="color:#E1E4E8;">   IPv4 地址 . . . . . . . . . . . . : </span><span style="color:#79B8FF;">192.168.0.102</span><span style="color:#E1E4E8;">(首选)</span></span>
<span class="line"><span style="color:#E1E4E8;">   子网掩码  . . . . . . . . . . . . : </span><span style="color:#79B8FF;">255.255.255.0</span></span>
<span class="line"><span style="color:#E1E4E8;">   获得租约的时间  . . . . . . . . . : 2023年8月20日 </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">49</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">53</span></span>
<span class="line"><span style="color:#E1E4E8;">   租约过期的时间  . . . . . . . . . : 2023年8月21日 </span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">49</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">56</span></span>
<span class="line"><span style="color:#E1E4E8;">   默认网关. . . . . . . . . . . . . : </span><span style="color:#79B8FF;">192.168.0.1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">无线局域网适配器 WLAN:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">   连接特定的 DNS 后缀 . . . . . . . :</span></span>
<span class="line"><span style="color:#24292E;">   描述. . . . . . . . . . . . . . . : </span><span style="color:#6F42C1;">Intel</span><span style="color:#24292E;">(R) Wi</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Fi </span><span style="color:#005CC5;">6</span><span style="color:#24292E;"> AX200 160MHz</span></span>
<span class="line"><span style="color:#24292E;">   IPv4 地址 . . . . . . . . . . . . : </span><span style="color:#005CC5;">192.168.0.102</span><span style="color:#24292E;">(首选)</span></span>
<span class="line"><span style="color:#24292E;">   子网掩码  . . . . . . . . . . . . : </span><span style="color:#005CC5;">255.255.255.0</span></span>
<span class="line"><span style="color:#24292E;">   获得租约的时间  . . . . . . . . . : 2023年8月20日 </span><span style="color:#005CC5;">19</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">49</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">53</span></span>
<span class="line"><span style="color:#24292E;">   租约过期的时间  . . . . . . . . . : 2023年8月21日 </span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">49</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">56</span></span>
<span class="line"><span style="color:#24292E;">   默认网关. . . . . . . . . . . . . : </span><span style="color:#005CC5;">192.168.0.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>上面的子网掩码是 <code>255.255.255.0</code> , 其实就是 <code>/24</code></p><p>这种格式其实表达的信息更灵活，你可以在掩码的时候掩住前面一段后面一段，中间留一段做主机号，这是没有问题的。</p><p>问题在于有点过度设计的了，随意地掩盖住几位只会让网络运维人员心烦，久而久之用的越来越少，就算是用，也只会顺序掩盖前面几位，其实目前碰到的大多数这种格式的掩码他传达的信息 CIDR 也是可以表述的。了解一下，至少目前还是有很多人用这个写法的掩码的。</p>`,40),p=[t];function o(r,c,E,y,i,d){return n(),e("div",null,p)}const C=s(l,[["render",o]]);export{B as __pageData,C as default};
